import{s as ce,f as g,a as V,l as R,r as ue,g as _,u as Q,d as m,c as H,h as C,m as J,v as de,j as c,w as a,i as X,B as $,x as te,K as he,o as fe,N as re,C as pe,n as se,p as le}from"../chunks/scheduler.e544945c.js";import{e as ae}from"../chunks/each.2fe1c5ed.js";import{S as ve,i as me}from"../chunks/index.721f4317.js";function oe(u,r,s){const b=u.slice();return b[25]=r[s],b}function ne(u){let r,s,b,h,d,o,v='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 transition-all group-hover:rotate-180"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>',x,f;return{c(){r=g("div"),s=g("div"),b=R(`Search :\r
                            `),h=g("input"),d=V(),o=g("button"),o.innerHTML=v,this.h()},l(t){r=_(t,"DIV",{class:!0});var p=C(r);s=_(p,"DIV",{class:!0});var k=C(s);b=J(k,`Search :\r
                            `),h=_(k,"INPUT",{type:!0,autocomplete:!0,name:!0,class:!0,placeholder:!0}),d=H(k),o=_(k,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(o)!=="svelte-1hkw89p"&&(o.innerHTML=v),k.forEach(m),p.forEach(m),this.h()},h(){c(h,"type","text"),c(h,"autocomplete","off"),c(h,"name","search"),c(h,"class","border text-sm rounded-lg block w-full p-1.5 bg-white dark:bg-neutral-800 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:text-white focus:ring-primary-500 focus:border-primary-500 focus:outline-none outline-none transition-all caret-primary-600 focus:ring-offset-white focus:ring-offset-2 focus:ring-2 mt-1"),c(h,"placeholder","Search users by usernames"),c(o,"class","absolute top-0 right-0 group"),c(s,"class","relative w-full h-full text-sm"),c(r,"class","bg-neutral-100 rounded-lg p-2 absolute top-0 left-0 right-0")},m(t,p){X(t,r,p),a(r,s),a(s,b),a(s,h),re(h,u[0]),a(s,d),a(s,o),x||(f=[$(h,"input",u[9]),$(o,"click",u[10])],x=!0)},p(t,p){p&1&&h.value!==t[0]&&re(h,t[0])},d(t){t&&m(r),x=!1,pe(f)}}}function ie(u){let r,s=u[25].username+"",b,h,d,o=u[25].email+"",v,x;return{c(){r=g("div"),b=R(s),h=V(),d=g("div"),v=R(o),x=V(),this.h()},l(f){r=_(f,"DIV",{class:!0});var t=C(r);b=J(t,s),h=H(t),d=_(t,"DIV",{class:!0});var p=C(d);v=J(p,o),p.forEach(m),x=H(t),t.forEach(m),this.h()},h(){c(d,"class","opacity-0 group-hover:opacity-100 transition-all"),c(r,"class","w-full transition-all hover:bg-neutral-100 p-2 cursor-pointer rounded-lg hover:px-4 relative group flex flex-row justify-between")},m(f,t){X(f,r,t),a(r,b),a(r,h),a(r,d),a(d,v),a(r,x)},p(f,t){t&2&&s!==(s=f[25].username+"")&&se(b,s),t&2&&o!==(o=f[25].email+"")&&se(v,o)},d(f){f&&m(r)}}}function ge(u){let r,s="",b,h,d,o,v,x=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 transition-all group-hover:rotate-[360deg] duration-300"><path stroke-linecap="round" stroke-linejoin="round" d="M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"></path></svg>
            Go back`,f,t,p,k,W,P,S,B,y,D,F,I,G='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>',q,A,L,z,K,w=u[4]&&ne(u),e=ae(u[1]),l=[];for(let n=0;n<e.length;n+=1)l[n]=ie(oe(u,e,n));return{c(){r=g("script"),r.innerHTML=s,h=V(),d=g("section"),o=g("div"),v=g("a"),v.innerHTML=x,f=V(),t=g("div"),p=g("div"),k=g("div"),W=V(),P=g("div"),S=g("div"),B=V(),y=g("div"),D=g("h5"),F=R(`Premium users\r
                    `),I=g("button"),I.innerHTML=G,q=V(),w&&w.c(),A=V(),L=g("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){const E=ue("svelte-1ex87jb",document.head);r=_(E,"SCRIPT",{src:!0,"data-svelte-h":!0}),Q(r)!=="svelte-avrofd"&&(r.innerHTML=s),E.forEach(m),h=H(n),d=_(n,"SECTION",{class:!0});var i=C(d);o=_(i,"DIV",{class:!0});var T=C(o);v=_(T,"A",{href:!0,class:!0,"data-svelte-h":!0}),Q(v)!=="svelte-ptbhqv"&&(v.innerHTML=x),f=H(T),t=_(T,"DIV",{class:!0});var M=C(t);p=_(M,"DIV",{class:!0});var N=C(p);k=_(N,"DIV",{class:!0}),C(k).forEach(m),N.forEach(m),W=H(M),P=_(M,"DIV",{class:!0});var O=C(P);S=_(O,"DIV",{class:!0}),C(S).forEach(m),O.forEach(m),B=H(M),y=_(M,"DIV",{class:!0});var j=C(y);D=_(j,"H5",{class:!0});var U=C(D);F=J(U,`Premium users\r
                    `),I=_(U,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(I)!=="svelte-1y07h73"&&(I.innerHTML=G),U.forEach(m),q=H(j),w&&w.l(j),A=H(j),L=_(j,"DIV",{class:!0});var ee=C(L);for(let Y=0;Y<l.length;Y+=1)l[Y].l(ee);ee.forEach(m),j.forEach(m),M.forEach(m),T.forEach(m),i.forEach(m),this.h()},h(){document.title="PCC - Admin dashboard",de(r.src,b="https://cdn.jsdelivr.net/npm/apexcharts")||c(r,"src",b),c(v,"href","../"),c(v,"class","button-secondary w-fit button-small group"),c(k,"class","w-full"),c(p,"class","lg:col-span-2 border border-neutral-200 rounded-lg"),c(S,"class",""),c(P,"class","border border-neutral-200 rounded-lg p-4"),c(I,"class","w-fit button-secondary button-small"),c(D,"class","w-full border-b border-neutral-200 flex flex-row p-2 items-center justify-between"),c(L,"class","flex flex-col gap-0 overflow-y-auto overflow-x-hidden"),c(y,"class","h-full flex flex-col gap-2 border border-neutral-200 rounded-lg max-h-[450px] p-4 relative"),c(t,"class","w-full h-full grid grid-cols-1 lg:grid-cols-2 gap-6"),c(o,"class","max-w-screen-lg mx-auto flex flex-col gap-6"),c(d,"class","grow w-full py-8 px-4 lg:py-16 lg:px-6 space-y-6")},m(n,E){a(document.head,r),X(n,h,E),X(n,d,E),a(d,o),a(o,v),a(o,f),a(o,t),a(t,p),a(p,k),u[6](k),a(t,W),a(t,P),a(P,S),u[7](S),a(t,B),a(t,y),a(y,D),a(D,F),a(D,I),a(y,q),w&&w.m(y,null),a(y,A),a(y,L);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(L,null);z||(K=$(I,"click",u[8]),z=!0)},p(n,[E]){if(n[4]?w?w.p(n,E):(w=ne(n),w.c(),w.m(y,A)):w&&(w.d(1),w=null),E&2){e=ae(n[1]);let i;for(i=0;i<e.length;i+=1){const T=oe(n,e,i);l[i]?l[i].p(T,E):(l[i]=ie(T),l[i].c(),l[i].m(L,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=e.length}},i:te,o:te,d(n){n&&(m(h),m(d)),m(r),u[6](null),u[7](null),w&&w.d(),he(l,n),z=!1,K()}}}const Z=9;function _e(u,r,s){let{data:b}=r,{user:h,users:d}=b,o=d.slice(0,Z),v,x,f,t=!1;const p={};d.forEach(e=>{const l=e.joined.toISOString().split("T")[0];p[l]=(p[l]||0)+1});const k=Object.keys(p),W=Math.min(...k.map(e=>new Date(e))),P=Math.max(...k.map(e=>new Date(e))),S=[];for(let e=new Date(W);e<=P;e.setDate(e.getDate()+1)){const l=e.toISOString().split("T")[0];S.push(l)}const B=[];let y=0;S.forEach(e=>{const l=p[e]||0;y+=l,B.push({x:new Date(e).getDate()+"/"+(new Date(e).getMonth()+1),y})});const D=d.filter(e=>e.isPremium);let I={...{chart:{height:450,type:"line",toolbar:{show:!1}},colors:["#0da858"],dataLabels:{enabled:!0},stroke:{curve:"smooth"},grid:{borderColor:"#e7e7e7",row:{colors:["#f3f3f3","transparent"],opacity:.5}}},series:[{name:"Users",data:B}],title:{text:"Users progression",align:"left"},xaxis:{categories:Object.keys(p),title:{text:"Days"}},yaxis:{title:{text:"Users"},min:5,max:40}},G={series:[D.length,d.length-D.length],chart:{width:380,type:"pie"},labels:["Premium","Free"]};fe(()=>{new ApexCharts(v,I).render(),new ApexCharts(x,G).render()});function q(){if(!f){s(1,o=D.slice(0,Z));return}const e=2,l=f.toLowerCase().split(" ");s(1,o=D.filter(n=>{const E=n.username.toLowerCase().split(" ");for(let i=0;i<l.length;i++){const T=l[i];let M=!1;for(let N=0;N<E.length;N++){const O=E[N];if(O.includes(T)){M=!0;break}if(T.length-O.length<=e){let j=0;for(let U=0;U<O.length&&!(O[U]!==T[U]&&(j++,j>e));U++);if(j<=e){M=!0;break}}}if(!M)return!1}return!0}).slice(0,Z))}function A(e){le[e?"unshift":"push"](()=>{v=e,s(2,v)})}function L(e){le[e?"unshift":"push"](()=>{x=e,s(3,x)})}const z=()=>{s(4,t=!t)};function K(){f=this.value,s(0,f)}const w=()=>{s(4,t=!1),s(0,f="")};return u.$$set=e=>{"data"in e&&s(5,b=e.data)},u.$$.update=()=>{u.$$.dirty&1&&q()},[f,o,v,x,t,b,A,L,z,K,w]}class ke extends ve{constructor(r){super(),me(this,r,_e,ge,ce,{data:5})}}export{ke as component};
