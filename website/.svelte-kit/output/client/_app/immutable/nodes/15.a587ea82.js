import{s as K,f as S,g as P,h as I,d as g,i as k,x as D,X as de,Y as me,o as re,p as ne,D as Ee,E as xe,F as ke,G as Ie,Z as je,a as V,e as ge,r as De,c as Y,l as L,u as oe,m as U,j as T,w as p,z as Re,C as Te,U as Ve}from"../chunks/scheduler.48e732d9.js";import{S as Z,i as J,a as x,t as j,c as ue,b as M,d as W,m as B,e as X,h as Ye,g as fe}from"../chunks/index.d806ca90.js";import{A as Fe}from"../chunks/Alert.91e35944.js";import{S as Ne}from"../chunks/Spinner.da9fd2c5.js";var Ce="https://js.stripe.com/v3",qe=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,ye="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Oe=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Ce,'"]')),t=0;t<e.length;t++){var r=e[t];if(qe.test(r.src))return r}return null},Ae=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(Ce).concat(t);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r},Le=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.1.11",startTime:t})},te=null,Ue=function(e){return te!==null||(te=new Promise(function(t,r){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe&&e&&console.warn(ye),window.Stripe){t(window.Stripe);return}try{var n=Oe();n&&e?console.warn(ye):n||(n=Ae(e)),n.addEventListener("load",function(){window.Stripe?t(window.Stripe):r(new Error("Stripe.js not available"))}),n.addEventListener("error",function(){r(new Error("Failed to load Stripe.js"))})}catch(l){r(l);return}})),te},Ge=function(e,t,r){if(e===null)return null;var n=e.apply(void 0,t);return Le(n,r),n},ve=Promise.resolve().then(function(){return Ue(null)}),Se=!1;ve.catch(function(s){Se||console.warn(s)});var He=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Se=!0;var n=Date.now();return ve.then(function(l){return Ge(l,t,n)})};function he(s,e,t,r,n={}){const l=t.create(e,n);return l.mount(s),l.on("change",i=>r("change",i)),l.on("ready",i=>r("ready",i)),l.on("focus",i=>r("focus",i)),l.on("blur",i=>r("blur",i)),l.on("escape",i=>r("escape",i)),l.on("click",i=>r("click",i)),l}const Pe=typeof window>"u";function Me(s){if(!Pe)return s.registerAppInfo({name:"svelte-stripe-js",url:"https://svelte-stripe-js.vercel.app"})}function We(s){let e;return{c(){e=S("div")},l(t){e=P(t,"DIV",{}),I(e).forEach(g)},m(t,r){k(t,e,r),s[12](e)},p:D,i:D,o:D,d(t){t&&g(e),s[12](null)}}}function Be(s,e,t){let{classes:r={}}=e,{style:n={}}=e,{placeholder:l="Card number"}=e,{disabled:i=!1}=e,{showIcon:c=!0}=e,{iconStyle:f="default"}=e,{element:b=null}=e,h;const u=de(),{elements:d}=me("stripe");re(()=>(t(1,b=he(h,"cardNumber",d,u,{classes:r,style:n,placeholder:l,disabled:i,showIcon:c,iconStyle:f})),()=>b.destroy()));function C(){b.blur()}function w(){b.clear()}function v(){b.destroy()}function a(){b.focus()}function y(m){ne[m?"unshift":"push"](()=>{h=m,t(0,h)})}return s.$$set=m=>{"classes"in m&&t(2,r=m.classes),"style"in m&&t(3,n=m.style),"placeholder"in m&&t(4,l=m.placeholder),"disabled"in m&&t(5,i=m.disabled),"showIcon"in m&&t(6,c=m.showIcon),"iconStyle"in m&&t(7,f=m.iconStyle),"element"in m&&t(1,b=m.element)},[h,b,r,n,l,i,c,f,C,w,v,a,y]}class Xe extends Z{constructor(e){super(),J(this,e,Be,We,K,{classes:2,style:3,placeholder:4,disabled:5,showIcon:6,iconStyle:7,element:1,blur:8,clear:9,destroy:10,focus:11})}get blur(){return this.$$.ctx[8]}get clear(){return this.$$.ctx[9]}get destroy(){return this.$$.ctx[10]}get focus(){return this.$$.ctx[11]}}function ze(s){let e;return{c(){e=S("div")},l(t){e=P(t,"DIV",{}),I(e).forEach(g)},m(t,r){k(t,e,r),s[10](e)},p:D,i:D,o:D,d(t){t&&g(e),s[10](null)}}}function Ke(s,e,t){let{classes:r={}}=e,{style:n={}}=e,{placeholder:l="MM / YY"}=e,{disabled:i=!1}=e,{element:c=null}=e,f;const b=de(),{elements:h}=me("stripe");re(()=>(t(1,c=he(f,"cardExpiry",h,b,{classes:r,style:n,placeholder:l,disabled:i})),()=>c.destroy()));function u(){c.blur()}function d(){c.clear()}function C(){c.destroy()}function w(){c.focus()}function v(a){ne[a?"unshift":"push"](()=>{f=a,t(0,f)})}return s.$$set=a=>{"classes"in a&&t(2,r=a.classes),"style"in a&&t(3,n=a.style),"placeholder"in a&&t(4,l=a.placeholder),"disabled"in a&&t(5,i=a.disabled),"element"in a&&t(1,c=a.element)},[f,c,r,n,l,i,u,d,C,w,v]}class Ze extends Z{constructor(e){super(),J(this,e,Ke,ze,K,{classes:2,style:3,placeholder:4,disabled:5,element:1,blur:6,clear:7,destroy:8,focus:9})}get blur(){return this.$$.ctx[6]}get clear(){return this.$$.ctx[7]}get destroy(){return this.$$.ctx[8]}get focus(){return this.$$.ctx[9]}}function Je(s){let e;return{c(){e=S("div")},l(t){e=P(t,"DIV",{}),I(e).forEach(g)},m(t,r){k(t,e,r),s[10](e)},p:D,i:D,o:D,d(t){t&&g(e),s[10](null)}}}function Qe(s,e,t){let{classes:r={}}=e,{style:n={}}=e,{placeholder:l="CVC"}=e,{disabled:i=!1}=e,{element:c=null}=e,f;const b=de(),{elements:h}=me("stripe");re(()=>(t(1,c=he(f,"cardCvc",h,b,{classes:r,style:n,placeholder:l,disabled:i})),()=>c.destroy()));function u(){c.blur()}function d(){c.clear()}function C(){c.destroy()}function w(){c.focus()}function v(a){ne[a?"unshift":"push"](()=>{f=a,t(0,f)})}return s.$$set=a=>{"classes"in a&&t(2,r=a.classes),"style"in a&&t(3,n=a.style),"placeholder"in a&&t(4,l=a.placeholder),"disabled"in a&&t(5,i=a.disabled),"element"in a&&t(1,c=a.element)},[f,c,r,n,l,i,u,d,C,w,v]}class $e extends Z{constructor(e){super(),J(this,e,Qe,Je,K,{classes:2,style:3,placeholder:4,disabled:5,element:1,blur:6,clear:7,destroy:8,focus:9})}get blur(){return this.$$.ctx[6]}get clear(){return this.$$.ctx[7]}get destroy(){return this.$$.ctx[8]}get focus(){return this.$$.ctx[9]}}function et(s){let e;const t=s[12].default,r=Ee(t,s,s[11],null);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,l){r&&r.m(n,l),e=!0},p(n,[l]){r&&r.p&&(!e||l&2048)&&xe(r,t,n,n[11],e?Ie(t,n[11],l,null):ke(n[11]),null)},i(n){e||(x(r,n),e=!0)},o(n){j(r,n),e=!1},d(n){r&&r.d(n)}}}function tt(s,e,t){let r,{$$slots:n={},$$scope:l}=e,{stripe:i}=e,{theme:c="stripe"}=e,{variables:f={}}=e,{rules:b={}}=e,{labels:h="above"}=e,{loader:u="auto"}=e,{fonts:d=[]}=e,{locale:C="auto"}=e,{clientSecret:w=void 0}=e,{elements:v=Pe?null:i.elements({appearance:r,clientSecret:w,fonts:d,loader:u,locale:C})}=e;return Me(i),je("stripe",{stripe:i,elements:v}),s.$$set=a=>{"stripe"in a&&t(0,i=a.stripe),"theme"in a&&t(1,c=a.theme),"variables"in a&&t(2,f=a.variables),"rules"in a&&t(3,b=a.rules),"labels"in a&&t(4,h=a.labels),"loader"in a&&t(5,u=a.loader),"fonts"in a&&t(6,d=a.fonts),"locale"in a&&t(7,C=a.locale),"clientSecret"in a&&t(8,w=a.clientSecret),"elements"in a&&t(9,v=a.elements),"$$scope"in a&&t(11,l=a.$$scope)},s.$$.update=()=>{s.$$.dirty&30&&t(10,r={theme:c,variables:f,rules:b,labels:h}),s.$$.dirty&1664&&v&&v.update({appearance:r,locale:C})},[i,c,f,b,h,u,d,C,w,v,r,l,n]}class rt extends Z{constructor(e){super(),J(this,e,tt,et,K,{stripe:0,theme:1,variables:2,rules:3,labels:4,loader:5,fonts:6,locale:7,clientSecret:8,elements:9})}}const nt="pk_test_51O9nD6IXnCqZazStBYa3hgHJGkS8RoISi4mge2YTbC7xY62abc4HW9cNgQ31K5UxptR6toYh0TfgtotI9HsxDrOr00hER0mPr6";function pe(s){let e,t,r,n="Pay by card",l,i,c,f,b="PCC Pro Version",h,u,d,C=(s[4]/100).toFixed(2)+"",w,v,a,y,m,E,z="Total :",o,_,N,G=(s[4]/100).toFixed(2)+"",le,se,A,q,Q,ae,be;return q=new rt({props:{stripe:s[0],$$slots:{default:[at]},$$scope:{ctx:s}}}),{c(){e=S("section"),t=S("div"),r=S("h2"),r.textContent=n,l=V(),i=S("div"),c=S("div"),f=S("p"),f.textContent=b,h=V(),u=S("p"),d=L("$"),w=L(C),v=V(),a=S("hr"),y=V(),m=S("div"),E=S("p"),E.textContent=z,o=V(),_=S("p"),N=L("$"),le=L(G),se=V(),A=S("form"),M(q.$$.fragment),this.h()},l(R){e=P(R,"SECTION",{class:!0});var O=I(e);t=P(O,"DIV",{class:!0});var F=I(t);r=P(F,"H2",{class:!0,"data-svelte-h":!0}),oe(r)!=="svelte-b1suo7"&&(r.textContent=n),l=Y(F),i=P(F,"DIV",{class:!0});var H=I(i);c=P(H,"DIV",{class:!0});var $=I(c);f=P($,"P",{"data-svelte-h":!0}),oe(f)!=="svelte-7qqdp9"&&(f.textContent=b),h=Y($),u=P($,"P",{class:!0});var ie=I(u);d=U(ie,"$"),w=U(ie,C),ie.forEach(g),$.forEach(g),v=Y(H),a=P(H,"HR",{class:!0}),y=Y(H),m=P(H,"DIV",{class:!0});var ee=I(m);E=P(ee,"P",{"data-svelte-h":!0}),oe(E)!=="svelte-1mbgsbw"&&(E.textContent=z),o=Y(ee),_=P(ee,"P",{class:!0});var ce=I(_);N=U(ce,"$"),le=U(ce,G),ce.forEach(g),ee.forEach(g),H.forEach(g),se=Y(F),A=P(F,"FORM",{class:!0});var _e=I(A);W(q.$$.fragment,_e),_e.forEach(g),F.forEach(g),O.forEach(g),this.h()},h(){T(r,"class","text-center"),T(u,"class","font-semibold"),T(c,"class","flex justify-between items-center px-2"),T(a,"class","my-1"),T(_,"class","font-semibold"),T(m,"class","flex justify-between items-center px-2"),T(i,"class","border border-neutral-200 dark:border-neutral-700 roundedlg-md flex flex-col mt-4"),T(A,"class","flex flex-col gap-4 mt-4"),T(t,"class","rounded-lg border border-neutral-200 dark:border-neutral-700 p-6"),T(e,"class","py-8 px-4 mx-auto max-w-xl lg:py-16 lg:px-6 w-full grow")},m(R,O){k(R,e,O),p(e,t),p(t,r),p(t,l),p(t,i),p(i,c),p(c,f),p(c,h),p(c,u),p(u,d),p(u,w),p(i,v),p(i,a),p(i,y),p(i,m),p(m,E),p(m,o),p(m,_),p(_,N),p(_,le),p(t,se),p(t,A),B(q,A,null),Q=!0,ae||(be=Re(A,"submit",Te(s[5])),ae=!0)},p(R,O){const F={};O&1&&(F.stripe=R[0]),O&270&&(F.$$scope={dirty:O,ctx:R}),q.$set(F)},i(R){Q||(x(q.$$.fragment,R),Q=!0)},o(R){j(q.$$.fragment,R),Q=!1},d(R){R&&g(e),X(q),ae=!1,be()}}}function we(s){let e,t;return e=new Fe({props:{type:s[3].type,message:s[3].message??'Congrats! You are now a PCC Pro user! Click on "Refresh Plan" in the PCC extension for your purchase to take effect.'}}),{c(){M(e.$$.fragment)},l(r){W(e.$$.fragment,r)},m(r,n){B(e,r,n),t=!0},p(r,n){const l={};n&8&&(l.type=r[3].type),n&8&&(l.message=r[3].message??'Congrats! You are now a PCC Pro user! Click on "Refresh Plan" in the PCC extension for your purchase to take effect.'),e.$set(l)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){j(e.$$.fragment,r),t=!1},d(r){X(e,r)}}}function lt(s){let e,t=(s[4]/100).toFixed(2)+"",r,n;return{c(){e=L("Pay "),r=L(t),n=L(" €")},l(l){e=U(l,"Pay "),r=U(l,t),n=U(l," €")},m(l,i){k(l,e,i),k(l,r,i),k(l,n,i)},p:D,i:D,o:D,d(l){l&&(g(e),g(r),g(n))}}}function st(s){let e,t;return e=new Ne({}),{c(){M(e.$$.fragment)},l(r){W(e.$$.fragment,r)},m(r,n){B(e,r,n),t=!0},p:D,i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){j(e.$$.fragment,r),t=!1},d(r){X(e,r)}}}function at(s){let e,t,r,n,l,i,c,f,b,h,u,d,C,w;function v(o){s[7](o)}let a={classes:{base:"border rounded-lg w-full p-4 bg-neutral-100 border-neutral-300 border-neutral-200 dark:border-neutral-600 placeholder-neutral-400"}};s[1]!==void 0&&(a.element=s[1]),e=new Xe({props:a}),ne.push(()=>Ye(e,"element",v)),l=new Ze({props:{classes:{base:"border rounded-lg w-full p-4 bg-neutral-100 border-neutral-200 dark:border-neutral-600 placeholder-neutral-400"}}}),c=new $e({props:{classes:{base:"border rounded-lg w-full p-4 bg-neutral-100 border-neutral-200 dark:border-neutral-600 placeholder-neutral-400"}}});let y=s[3].display&&we(s);const m=[st,lt],E=[];function z(o,_){return o[2]?0:1}return u=z(s),d=E[u]=m[u](s),{c(){M(e.$$.fragment),r=V(),n=S("div"),M(l.$$.fragment),i=V(),M(c.$$.fragment),f=V(),y&&y.c(),b=V(),h=S("button"),d.c(),this.h()},l(o){W(e.$$.fragment,o),r=Y(o),n=P(o,"DIV",{class:!0});var _=I(n);W(l.$$.fragment,_),i=Y(_),W(c.$$.fragment,_),_.forEach(g),f=Y(o),y&&y.l(o),b=Y(o),h=P(o,"BUTTON",{class:!0});var N=I(h);d.l(N),N.forEach(g),this.h()},h(){T(n,"class","flex flex-col md:flex-row gap-4"),T(h,"class","w-full button-primary"),h.disabled=C=s[2]||s[3].type==="success"},m(o,_){B(e,o,_),k(o,r,_),k(o,n,_),B(l,n,null),p(n,i),B(c,n,null),k(o,f,_),y&&y.m(o,_),k(o,b,_),k(o,h,_),E[u].m(h,null),w=!0},p(o,_){const N={};!t&&_&2&&(t=!0,N.element=o[1],Ve(()=>t=!1)),e.$set(N),o[3].display?y?(y.p(o,_),_&8&&x(y,1)):(y=we(o),y.c(),x(y,1),y.m(b.parentNode,b)):y&&(fe(),j(y,1,1,()=>{y=null}),ue());let G=u;u=z(o),u===G?E[u].p(o,_):(fe(),j(E[G],1,1,()=>{E[G]=null}),ue(),d=E[u],d?d.p(o,_):(d=E[u]=m[u](o),d.c()),x(d,1),d.m(h,null)),(!w||_&12&&C!==(C=o[2]||o[3].type==="success"))&&(h.disabled=C)},i(o){w||(x(e.$$.fragment,o),x(l.$$.fragment,o),x(c.$$.fragment,o),x(y),x(d),w=!0)},o(o){j(e.$$.fragment,o),j(l.$$.fragment,o),j(c.$$.fragment,o),j(y),j(d),w=!1},d(o){o&&(g(r),g(n),g(f),g(b),g(h)),X(e,o),X(l),X(c),y&&y.d(o),E[u].d()}}}function it(s){let e,t,r,n=s[0]&&pe(s);return{c(){e=V(),n&&n.c(),t=ge(),this.h()},l(l){De("svelte-14ih5ja",document.head).forEach(g),e=Y(l),n&&n.l(l),t=ge(),this.h()},h(){document.title="PCC - Payment"},m(l,i){k(l,e,i),n&&n.m(l,i),k(l,t,i),r=!0},p(l,[i]){l[0]?n?(n.p(l,i),i&1&&x(n,1)):(n=pe(l),n.c(),x(n,1),n.m(t.parentNode,t)):n&&(fe(),j(n,1,1,()=>{n=null}),ue())},i(l){r||(x(n),r=!0)},o(l){j(n),r=!1},d(l){l&&(g(e),g(t)),n&&n.d(l)}}}async function ct(){const e=await(await fetch("/payment-intent",{method:"POST"})).json();return e.error?{error:e.message}:{clientSecret:e.clientSecret}}function ot(s,e,t){let{data:r}=e;const{premiumPrice:n}=r;let l,i,c=!1,f={message:"",display:!1,type:"error"};re(async()=>{t(0,l=await He(nt))});async function b(){if(c)return;t(2,c=!0),t(3,f.display=!1,f);const u=await ct();if(u.error)t(3,f={message:u.error,display:!0,type:"error"});else{const d=await l.confirmCardPayment(u.clientSecret,{payment_method:{card:i}});d.error?t(3,f={message:d.error.message,display:!0,type:"error"}):d.paymentIntent.status!=="succeeded"?t(3,f={message:"Payment failed",display:!0,type:"error"}):t(3,f={message:'Congrats! You are now a PCC Pro user! Click on "Refresh Plan" in the PCC extension for your purchase to take effect.',display:!0,type:"success"})}t(2,c=!1)}function h(u){i=u,t(1,i)}return s.$$set=u=>{"data"in u&&t(6,r=u.data)},[l,i,c,f,n,b,r,h]}class ht extends Z{constructor(e){super(),J(this,e,ot,it,K,{data:6})}}export{ht as component};
