import{s as ue,f as v,a as V,l as R,r as ce,g,u as Q,d as p,c as P,h as C,m as J,v as de,j as u,w as a,i as K,B as $,x as te,L as he,o as fe,P as re,C as pe,n as se,p as le}from"../chunks/scheduler.2c72f06e.js";import{e as ae}from"../chunks/each.c533f48c.js";import{S as me,i as ve}from"../chunks/index.d3a2f505.js";function ne(c,r,s){const b=c.slice();return b[24]=r[s],b}function oe(c){let r,s,b,n,d,l,h='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 transition-all group-hover:rotate-180"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>',w,f;return{c(){r=v("div"),s=v("div"),b=R(`Search :\r
                            `),n=v("input"),d=V(),l=v("button"),l.innerHTML=h,this.h()},l(t){r=g(t,"DIV",{class:!0});var _=C(r);s=g(_,"DIV",{class:!0});var y=C(s);b=J(y,`Search :\r
                            `),n=g(y,"INPUT",{type:!0,autocomplete:!0,name:!0,class:!0,placeholder:!0}),d=P(y),l=g(y,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-1hkw89p"&&(l.innerHTML=h),y.forEach(p),_.forEach(p),this.h()},h(){u(n,"type","text"),u(n,"autocomplete","off"),u(n,"name","search"),u(n,"class","border text-sm rounded-lg block w-full p-1.5 bg-white dark:bg-neutral-800 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:text-white focus:ring-primary-500 focus:border-primary-500 focus:outline-none outline-none transition-all caret-primary-600 focus:ring-offset-white focus:ring-offset-2 focus:ring-2 mt-1"),u(n,"placeholder","Search users by usernames"),u(l,"class","absolute top-0 right-0 group"),u(s,"class","relative w-full h-full text-sm text-text-main dark:text-neutral-100"),u(r,"class","bg-neutral-100 dark:bg-neutral-700 rounded-lg p-2 absolute top-0 left-0 right-0")},m(t,_){K(t,r,_),a(r,s),a(s,b),a(s,n),re(n,c[0]),a(s,d),a(s,l),w||(f=[$(n,"input",c[9]),$(l,"click",c[10])],w=!0)},p(t,_){_&1&&n.value!==t[0]&&re(n,t[0])},d(t){t&&p(r),w=!1,pe(f)}}}function ie(c){let r,s=c[24].username+"",b,n,d,l=c[24].email+"",h,w;return{c(){r=v("div"),b=R(s),n=V(),d=v("div"),h=R(l),w=V(),this.h()},l(f){r=g(f,"DIV",{class:!0});var t=C(r);b=J(t,s),n=P(t),d=g(t,"DIV",{class:!0});var _=C(d);h=J(_,l),_.forEach(p),w=P(t),t.forEach(p),this.h()},h(){u(d,"class","opacity-0 group-hover:opacity-100 transition-all"),u(r,"class","w-full transition-all text-text-main dark:text-neutral-100 dark:hover:bg-neutral-600 hover:bg-neutral-100 p-2 cursor-pointer rounded-lg hover:px-4 relative group flex flex-row justify-between")},m(f,t){K(f,r,t),a(r,b),a(r,n),a(r,d),a(d,h),a(r,w)},p(f,t){t&2&&s!==(s=f[24].username+"")&&se(b,s),t&2&&l!==(l=f[24].email+"")&&se(h,l)},d(f){f&&p(r)}}}function ge(c){let r,s="",b,n,d,l,h,w=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 transition-all group-hover:rotate-[360deg] duration-300"><path stroke-linecap="round" stroke-linejoin="round" d="M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"></path></svg>
            Go back`,f,t,_,y,N,L,T,O,x,H,W,I,F='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>',q,B,S,z,G,e=c[4]&&oe(c),k=ae(c[1]),m=[];for(let o=0;o<k.length;o+=1)m[o]=ie(ne(c,k,o));return{c(){r=v("script"),r.innerHTML=s,n=V(),d=v("section"),l=v("div"),h=v("a"),h.innerHTML=w,f=V(),t=v("div"),_=v("div"),y=v("div"),N=V(),L=v("div"),T=v("div"),O=V(),x=v("div"),H=v("h5"),W=R(`Premium users\r
                    `),I=v("button"),I.innerHTML=F,q=V(),e&&e.c(),B=V(),S=v("div");for(let o=0;o<m.length;o+=1)m[o].c();this.h()},l(o){const D=ce("svelte-1ex87jb",document.head);r=g(D,"SCRIPT",{src:!0,"data-svelte-h":!0}),Q(r)!=="svelte-avrofd"&&(r.innerHTML=s),D.forEach(p),n=P(o),d=g(o,"SECTION",{class:!0});var i=C(d);l=g(i,"DIV",{class:!0});var E=C(l);h=g(E,"A",{href:!0,class:!0,"data-svelte-h":!0}),Q(h)!=="svelte-ptbhqv"&&(h.innerHTML=w),f=P(E),t=g(E,"DIV",{class:!0});var j=C(t);_=g(j,"DIV",{class:!0});var U=C(_);y=g(U,"DIV",{class:!0}),C(y).forEach(p),U.forEach(p),N=P(j),L=g(j,"DIV",{class:!0});var A=C(L);T=g(A,"DIV",{class:!0}),C(T).forEach(p),A.forEach(p),O=P(j),x=g(j,"DIV",{class:!0});var M=C(x);H=g(M,"H5",{class:!0});var X=C(H);W=J(X,`Premium users\r
                    `),I=g(X,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(I)!=="svelte-1y07h73"&&(I.innerHTML=F),X.forEach(p),q=P(M),e&&e.l(M),B=P(M),S=g(M,"DIV",{class:!0});var ee=C(S);for(let Y=0;Y<m.length;Y+=1)m[Y].l(ee);ee.forEach(p),M.forEach(p),j.forEach(p),E.forEach(p),i.forEach(p),this.h()},h(){document.title="PCC - Admin dashboard",de(r.src,b="https://cdn.jsdelivr.net/npm/apexcharts")||u(r,"src",b),u(h,"href","../"),u(h,"class","button-secondary w-fit button-small group"),u(y,"class","w-full"),u(_,"class","md:col-span-2 border border-neutral-200 dark:border-neutral-700 rounded-lg"),u(T,"class",""),u(L,"class","border border-neutral-200 dark:border-neutral-700 rounded-lg p-4"),u(I,"class","w-fit button-secondary button-small"),u(H,"class","w-full border-b border-neutral-200 dark:border-neutral-700 flex flex-row p-2 items-center justify-between"),u(S,"class","flex flex-col gap-0 overflow-y-auto overflow-x-hidden"),u(x,"class","h-full flex flex-col gap-2 border border-neutral-200 dark:border-neutral-700 rounded-lg max-h-[450px] p-4 relative"),u(t,"class","w-full h-full grid grid-cols-1 md:grid-cols-2 gap-6"),u(l,"class","max-w-screen-lg mx-auto flex flex-col gap-6"),u(d,"class","grow w-full py-8 px-4 lg:py-16 lg:px-6 space-y-6")},m(o,D){a(document.head,r),K(o,n,D),K(o,d,D),a(d,l),a(l,h),a(l,f),a(l,t),a(t,_),a(_,y),c[6](y),a(t,N),a(t,L),a(L,T),c[7](T),a(t,O),a(t,x),a(x,H),a(H,W),a(H,I),a(x,q),e&&e.m(x,null),a(x,B),a(x,S);for(let i=0;i<m.length;i+=1)m[i]&&m[i].m(S,null);z||(G=$(I,"click",c[8]),z=!0)},p(o,[D]){if(o[4]?e?e.p(o,D):(e=oe(o),e.c(),e.m(x,B)):e&&(e.d(1),e=null),D&2){k=ae(o[1]);let i;for(i=0;i<k.length;i+=1){const E=ne(o,k,i);m[i]?m[i].p(E,D):(m[i]=ie(E),m[i].c(),m[i].m(S,null))}for(;i<m.length;i+=1)m[i].d(1);m.length=k.length}},i:te,o:te,d(o){o&&(p(n),p(d)),p(r),c[6](null),c[7](null),e&&e.d(),he(m,o),z=!1,G()}}}const Z=9;function be(c,r,s){let{data:b}=r,{users:n}=b,d=n.slice(0,Z),l,h,w,f=!1;const t={};n.forEach(e=>{const k=e.joined.toISOString().split("T")[0];t[k]=(t[k]||0)+1});const _=Object.keys(t),y=Math.min(..._.map(e=>new Date(e))),N=Math.max(new Date),L=[];for(let e=new Date(y);e<=N;e.setDate(e.getDate()+1)){const k=e.toISOString().split("T")[0];L.push(k)}const T=[];let O=0;L.forEach(e=>{const k=t[e]||0;O+=k,T.push({x:new Date(e).getDate()+"/"+(new Date(e).getMonth()+1),y:O})});const x=n.filter(e=>e.isPremium);let W={...{chart:{height:450,type:"line",toolbar:{show:!1}},colors:["#0da858"],dataLabels:{enabled:!0},stroke:{curve:"smooth"},grid:{borderColor:"#e7e7e7",row:{colors:["#f3f3f3","transparent"],opacity:.5}}},series:[{name:"Users",data:T}],title:{text:"Users progression",align:"left"},xaxis:{categories:Object.keys(t),title:{text:"Days"}},yaxis:{title:{text:"Users"},min:0,max:Math.max(...T.map(e=>e.y))}},I={series:[x.length,n.length-x.length],chart:{width:380,type:"pie"},labels:["Premium","Free"]};fe(()=>{new ApexCharts(l,W).render(),new ApexCharts(h,I).render()});function F(){if(!w){s(1,d=x.slice(0,Z));return}const e=2,k=w.toLowerCase().split(" ");s(1,d=x.filter(m=>{const o=m.username.toLowerCase().split(" ");for(let D=0;D<k.length;D++){const i=k[D];let E=!1;for(let j=0;j<o.length;j++){const U=o[j];if(U.includes(i)){E=!0;break}if(i.length-U.length<=e){let A=0;for(let M=0;M<U.length&&!(U[M]!==i[M]&&(A++,A>e));M++);if(A<=e){E=!0;break}}}if(!E)return!1}return!0}).slice(0,Z))}function q(e){le[e?"unshift":"push"](()=>{l=e,s(2,l)})}function B(e){le[e?"unshift":"push"](()=>{h=e,s(3,h)})}const S=()=>{s(4,f=!f)};function z(){w=this.value,s(0,w)}const G=()=>{s(4,f=!1),s(0,w="")};return c.$$set=e=>{"data"in e&&s(5,b=e.data)},c.$$.update=()=>{c.$$.dirty&1&&F()},[w,d,l,h,f,b,q,B,S,z,G]}class xe extends me{constructor(r){super(),ve(this,r,be,ge,ue,{data:5})}}export{xe as component};
