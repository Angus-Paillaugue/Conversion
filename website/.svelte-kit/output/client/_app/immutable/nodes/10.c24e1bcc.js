import{s as We,p as Xe,a as g,f as d,r as $e,d as i,c as w,g as f,h as C,u as O,j as l,i as H,w as a,J as Re,B as Je,O as Ze,R as et,C as tt,z as U,l as ie,A as V,m as ce,n as Ye,x as Ke}from"../chunks/scheduler.2c72f06e.js";import{S as lt,i as st,h as at,b as rt,d as nt,m as ot,a as ut,t as it,e as ct}from"../chunks/index.d3a2f505.js";import{e as qe}from"../chunks/forms.eb2f0641.js";import{n as ze}from"../chunks/stores.b37ca69a.js";import{M as dt}from"../chunks/Modal.ab723866.js";function Fe(u){var v,p;let t,e,s,r,m=((p=(v=u[0])==null?void 0:v.account)==null?void 0:p.message)+"",o;return{c(){t=d("div"),e=U("svg"),s=U("path"),r=g(),o=ie(m),this.h()},l(h){t=f(h,"DIV",{class:!0,role:!0});var c=C(t);e=V(c,"svg",{class:!0,"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0});var b=C(e);s=V(b,"path",{d:!0}),C(s).forEach(i),b.forEach(i),r=w(c),o=ce(c,m),c.forEach(i),this.h()},h(){l(s,"d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"),l(e,"class","flex-shrink-0 inline w-4 h-4 mr-3"),l(e,"aria-hidden","true"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"fill","currentColor"),l(e,"viewBox","0 0 20 20"),l(t,"class","flex items-center p-4 text-sm border rounded-lg text-red-800 border-red-800 bg-red-100 dark:bg-red-600 dark:text-neutral-100 mb-4"),l(t,"role","alert")},m(h,c){H(h,t,c),a(t,e),a(e,s),a(t,r),a(t,o)},p(h,c){var b,P;c&1&&m!==(m=((P=(b=h[0])==null?void 0:b.account)==null?void 0:P.message)+"")&&Ye(o,m)},d(h){h&&i(t)}}}function ft(u){let t;return{c(){t=ie("Save")},l(e){t=ce(e,"Save")},m(e,s){H(e,t,s)},d(e){e&&i(t)}}}function ht(u){let t,e;return{c(){t=U("svg"),e=U("path"),this.h()},l(s){t=V(s,"svg",{fill:!0,class:!0,viewBox:!0,xmlns:!0});var r=C(t);e=V(r,"path",{"clip-rule":!0,d:!0,fill:!0,"fill-rule":!0}),C(e).forEach(i),r.forEach(i),this.h()},h(){l(e,"clip-rule","evenodd"),l(e,"d","M15.165 8.53a.5.5 0 01-.404.58A7 7 0 1023 16a.5.5 0 011 0 8 8 0 11-9.416-7.874.5.5 0 01.58.404z"),l(e,"fill","currentColor"),l(e,"fill-rule","evenodd"),l(t,"fill","none"),l(t,"class","w-6 h-6 animate-spin"),l(t,"viewBox","0 0 32 32"),l(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){H(s,t,r),a(t,e)},d(s){s&&i(t)}}}function Ge(u){var v,p;let t,e,s,r,m=((p=(v=u[0])==null?void 0:v.password)==null?void 0:p.message)+"",o;return{c(){t=d("div"),e=U("svg"),s=U("path"),r=g(),o=ie(m),this.h()},l(h){t=f(h,"DIV",{class:!0,role:!0});var c=C(t);e=V(c,"svg",{class:!0,"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0});var b=C(e);s=V(b,"path",{d:!0}),C(s).forEach(i),b.forEach(i),r=w(c),o=ce(c,m),c.forEach(i),this.h()},h(){l(s,"d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"),l(e,"class","flex-shrink-0 inline w-4 h-4 mr-3"),l(e,"aria-hidden","true"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"fill","currentColor"),l(e,"viewBox","0 0 20 20"),l(t,"class","flex items-center p-4 text-sm border rounded-lg text-red-800 border-red-800 bg-red-100 dark:bg-red-600 dark:text-neutral-100 mb-4"),l(t,"role","alert")},m(h,c){H(h,t,c),a(t,e),a(e,s),a(t,r),a(t,o)},p(h,c){var b,P;c&1&&m!==(m=((P=(b=h[0])==null?void 0:b.password)==null?void 0:P.message)+"")&&Ye(o,m)},d(h){h&&i(t)}}}function mt(u){let t;return{c(){t=ie("Change password")},l(e){t=ce(e,"Change password")},m(e,s){H(e,t,s)},d(e){e&&i(t)}}}function pt(u){let t,e;return{c(){t=U("svg"),e=U("path"),this.h()},l(s){t=V(s,"svg",{fill:!0,class:!0,viewBox:!0,xmlns:!0});var r=C(t);e=V(r,"path",{"clip-rule":!0,d:!0,fill:!0,"fill-rule":!0}),C(e).forEach(i),r.forEach(i),this.h()},h(){l(e,"clip-rule","evenodd"),l(e,"d","M15.165 8.53a.5.5 0 01-.404.58A7 7 0 1023 16a.5.5 0 011 0 8 8 0 11-9.416-7.874.5.5 0 01.58.404z"),l(e,"fill","currentColor"),l(e,"fill-rule","evenodd"),l(t,"fill","none"),l(t,"class","w-6 h-6 animate-spin"),l(t,"viewBox","0 0 32 32"),l(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){H(s,t,r),a(t,e)},d(s){s&&i(t)}}}function vt(u){let t,e="Are you sure you want to delete your account?";return{c(){t=d("p"),t.textContent=e,this.h()},l(s){t=f(s,"P",{slot:!0,"data-svelte-h":!0}),O(t)!=="svelte-vrr03"&&(t.textContent=e),this.h()},h(){l(t,"slot","body")},m(s,r){H(s,t,r)},p:Ke,d(s){s&&i(t)}}}function _t(u){let t,e="No, cancel",s,r,m='<button class="button-red w-full" type="submit">Yes, delete</button>',o,v;return{c(){t=d("button"),t.textContent=e,s=g(),r=d("form"),r.innerHTML=m,this.h()},l(p){t=f(p,"BUTTON",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-1qe45nh"&&(t.textContent=e),s=w(p),r=f(p,"FORM",{action:!0,method:!0,"data-svelte-h":!0}),O(r)!=="svelte-cghggx"&&(r.innerHTML=m),this.h()},h(){l(t,"class","button-secondary"),l(r,"action","?/deleteAccount"),l(r,"method","POST")},m(p,h){H(p,t,h),H(p,s,h),H(p,r,h),o||(v=Je(t,"click",u[9]),o=!0)},p:Ke,d(p){p&&(i(t),i(s),i(r)),o=!1,v()}}}function gt(u){var Ne,Se,je,Ue;let t,e,s,r=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 transition-all group-hover:rotate-[360deg] duration-300"><path stroke-linecap="round" stroke-linejoin="round" d="M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"></path></svg>
        Go back`,m,o,v,p="Account",h,c,b,P="Username",W,_,X,de,N,J,Te="E-mail",fe,D,$,he,te,R,le,me,pe,ve,x,Y,Ee="Password",_e,Z,He='<p>Current password</p> <input type="password" name="currentPassword" id="currentPassword" placeholder="Current password"/>',ge,q,Oe='<p>New password</p> <input type="password" name="newPassword" id="newPassword" placeholder="New password"/>',we,se,z,ae,be,xe,Ce,S,K,Pe="Danger zone",ke,j,Be="Delete account",re,A,ye,Q,Me,De,y=((Se=(Ne=u[0])==null?void 0:Ne.account)==null?void 0:Se.success)===!1&&Fe(u);function Ae(n,k){return n[2]?ht:ft}let ne=Ae(u),L=ne(u),M=((Ue=(je=u[0])==null?void 0:je.password)==null?void 0:Ue.success)===!1&&Ge(u);function Le(n,k){return n[4]?pt:mt}let oe=Le(u),I=oe(u);function Qe(n){u[10](n)}let Ie={title:"Delete account",$$slots:{footer:[_t],body:[vt]},$$scope:{ctx:u}};return u[3]!==void 0&&(Ie.status=u[3]),A=new dt({props:Ie}),Xe.push(()=>at(A,"status",Qe)),{c(){t=g(),e=d("section"),s=d("a"),s.innerHTML=r,m=g(),o=d("form"),v=d("h3"),v.textContent=p,h=g(),c=d("div"),b=d("p"),b.textContent=P,W=g(),_=d("input"),de=g(),N=d("div"),J=d("p"),J.textContent=Te,fe=g(),D=d("input"),he=g(),y&&y.c(),te=g(),R=d("button"),L.c(),me=g(),pe=d("hr"),ve=g(),x=d("form"),Y=d("h3"),Y.textContent=Ee,_e=g(),Z=d("div"),Z.innerHTML=He,ge=g(),q=d("div"),q.innerHTML=Oe,we=g(),M&&M.c(),se=g(),z=d("button"),I.c(),be=g(),xe=d("hr"),Ce=g(),S=d("div"),K=d("h3"),K.textContent=Pe,ke=g(),j=d("button"),j.textContent=Be,re=g(),rt(A.$$.fragment),this.h()},l(n){$e("svelte-1nqepv7",document.head).forEach(i),t=w(n),e=f(n,"SECTION",{class:!0});var T=C(e);s=f(T,"A",{href:!0,class:!0,"data-svelte-h":!0}),O(s)!=="svelte-12wbnyl"&&(s.innerHTML=r),m=w(T),o=f(T,"FORM",{action:!0,method:!0,class:!0});var E=C(o);v=f(E,"H3",{"data-svelte-h":!0}),O(v)!=="svelte-zi5xq3"&&(v.textContent=p),h=w(E),c=f(E,"DIV",{class:!0});var F=C(c);b=f(F,"P",{"data-svelte-h":!0}),O(b)!=="svelte-tu5pi4"&&(b.textContent=P),W=w(F),_=f(F,"INPUT",{type:!0,name:!0,id:!0}),F.forEach(i),de=w(E),N=f(E,"DIV",{class:!0});var G=C(N);J=f(G,"P",{"data-svelte-h":!0}),O(J)!=="svelte-1ic7i8b"&&(J.textContent=Te),fe=w(G),D=f(G,"INPUT",{type:!0,name:!0,id:!0}),G.forEach(i),he=w(E),y&&y.l(E),te=w(E),R=f(E,"BUTTON",{class:!0});var ee=C(R);L.l(ee),ee.forEach(i),E.forEach(i),me=w(T),pe=f(T,"HR",{}),ve=w(T),x=f(T,"FORM",{action:!0,method:!0,class:!0});var B=C(x);Y=f(B,"H3",{"data-svelte-h":!0}),O(Y)!=="svelte-n4071"&&(Y.textContent=Ee),_e=w(B),Z=f(B,"DIV",{class:!0,"data-svelte-h":!0}),O(Z)!=="svelte-csppcx"&&(Z.innerHTML=He),ge=w(B),q=f(B,"DIV",{class:!0,"data-svelte-h":!0}),O(q)!=="svelte-167s7j9"&&(q.innerHTML=Oe),we=w(B),M&&M.l(B),se=w(B),z=f(B,"BUTTON",{class:!0});var Ve=C(z);I.l(Ve),Ve.forEach(i),B.forEach(i),be=w(T),xe=f(T,"HR",{}),Ce=w(T),S=f(T,"DIV",{class:!0});var ue=C(S);K=f(ue,"H3",{"data-svelte-h":!0}),O(K)!=="svelte-nccdmv"&&(K.textContent=Pe),ke=w(ue),j=f(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),O(j)!=="svelte-1pp1igq"&&(j.textContent=Be),ue.forEach(i),T.forEach(i),re=w(n),nt(A.$$.fragment,n),this.h()},h(){document.title="PCC - Settings",l(s,"href","/dashboard"),l(s,"class","button-secondary button-small group w-fit mb-6"),l(_,"type","text"),l(_,"name","username"),_.readOnly="true",l(_,"id","username"),_.value=X=u[1].username,l(c,"class","flex flex-col gap-1"),l(D,"type","text"),l(D,"name","email"),l(D,"id","email"),D.value=$=u[1].email,l(N,"class","flex flex-col gap-1"),l(R,"class","button-primary w-full"),l(o,"action","?/save"),l(o,"method","POST"),l(o,"class","rounded-lg border-neutral-200 dark:border-neutral-700 border flex flex-col gap-4 md:p-10 p-6 h-fit w-full"),l(Z,"class","flex flex-col gap-1"),l(q,"class","flex flex-col gap-1"),l(z,"class","button-primary"),l(x,"action","?/password"),l(x,"method","POST"),l(x,"class","rounded-lg border-neutral-200 dark:border-neutral-700 border flex flex-col gap-4 md:p-10 p-6 h-fit w-full"),l(j,"class","button-red"),l(S,"class","rounded-lg border-neutral-200 dark:border-neutral-700 border flex flex-col gap-4 md:p-10 p-6 h-fit w-full"),l(e,"class","grow w-full py-8 px-4 lg:py-16 lg:px-6 max-w-screen-lg mx-auto")},m(n,k){H(n,t,k),H(n,e,k),a(e,s),a(e,m),a(e,o),a(o,v),a(o,h),a(o,c),a(c,b),a(c,W),a(c,_),a(o,de),a(o,N),a(N,J),a(N,fe),a(N,D),a(o,he),y&&y.m(o,null),a(o,te),a(o,R),L.m(R,null),a(e,me),a(e,pe),a(e,ve),a(e,x),a(x,Y),a(x,_e),a(x,Z),a(x,ge),a(x,q),a(x,we),M&&M.m(x,null),a(x,se),a(x,z),I.m(z,null),a(e,be),a(e,xe),a(e,Ce),a(e,S),a(S,K),a(S,ke),a(S,j),H(n,re,k),ot(A,n,k),Q=!0,Me||(De=[Re(le=qe.call(null,o,u[6])),Re(ae=qe.call(null,x,u[7])),Je(j,"click",u[8])],Me=!0)},p(n,[k]){var E,F,G,ee;(!Q||k&2&&X!==(X=n[1].username)&&_.value!==X)&&(_.value=X),(!Q||k&2&&$!==($=n[1].email)&&D.value!==$)&&(D.value=$),((F=(E=n[0])==null?void 0:E.account)==null?void 0:F.success)===!1?y?y.p(n,k):(y=Fe(n),y.c(),y.m(o,te)):y&&(y.d(1),y=null),ne!==(ne=Ae(n))&&(L.d(1),L=ne(n),L&&(L.c(),L.m(R,null))),le&&Ze(le.update)&&k&4&&le.update.call(null,n[6]),((ee=(G=n[0])==null?void 0:G.password)==null?void 0:ee.success)===!1?M?M.p(n,k):(M=Ge(n),M.c(),M.m(x,se)):M&&(M.d(1),M=null),oe!==(oe=Le(n))&&(I.d(1),I=oe(n),I&&(I.c(),I.m(z,null))),ae&&Ze(ae.update)&&k&16&&ae.update.call(null,n[7]);const T={};k&2056&&(T.$$scope={dirty:k,ctx:n}),!ye&&k&8&&(ye=!0,T.status=n[3],et(()=>ye=!1)),A.$set(T)},i(n){Q||(ut(A.$$.fragment,n),Q=!0)},o(n){it(A.$$.fragment,n),Q=!1},d(n){n&&(i(t),i(e),i(re)),y&&y.d(),L.d(),M&&M.d(),I.d(),ct(A,n),Me=!1,tt(De)}}}function wt(u,t,e){let{data:s}=t,{form:r}=t,{user:m}=s,o=!1,v=!1,p=!1;const h=()=>(e(2,o=!0),async({update:_})=>{e(2,o=!1),_({reset:!1})}),c=()=>(e(4,p=!0),async({update:_})=>{e(4,p=!1),_({reset:!1})}),b=()=>{e(3,v=!0)},P=()=>{e(3,v=!1)};function W(_){v=_,e(3,v)}return u.$$set=_=>{"data"in _&&e(5,s=_.data),"form"in _&&e(0,r=_.form)},u.$$.update=()=>{u.$$.dirty&1&&r&&(console.log(Object.keys(r),Object.keys(r).includes("account")),Object.keys(r).includes("account")?(e(1,m.username=r.formData.username,m),e(1,m.email=r.formData.email,m),r.account.success===!0&&ze("success","Settings saved successfully!")):Object.keys(r).includes("password")&&r.password.success===!0&&ze("success","Password changed successfully!"))},[r,m,o,v,p,s,h,c,b,P,W]}class Mt extends lt{constructor(t){super(),st(this,t,wt,gt,We,{data:5,form:0})}}export{Mt as component};
