import{s as de,f as x,a as H,l as M,r as he,g as y,u as pe,d as l,c as N,h as k,m as U,v as me,j as g,w as a,i as O,o as ge,x as fe,p as ae,z as ne,U as _e,K as ve,A as be,n as oe}from"../chunks/scheduler.48e732d9.js";import{S as $e,i as we,b as q,d as G,m as F,a as K,t as Q,e as R,h as xe}from"../chunks/index.d806ca90.js";import{e as ie}from"../chunks/each.7f778bc3.js";import{C as re}from"../chunks/Card.33695d8a.js";import{T as ye}from"../chunks/TextInput.aba2b0c1.js";import{I as le}from"../chunks/Icon.c5b4ca42.js";function ce(h,e,s){const i=h.slice();return i[25]=e[s],i}function De(h){let e,s,i,v,p,c=h[5](1)+"",u,_,b,n,f,E,T,D=h[5](7)+"",C,I,P,d,$,S,o,r=h[5](30)+"",m,V,w,A;return{c(){e=x("div"),s=x("div"),i=x("h3"),v=M("+"),p=x("span"),u=M(c),_=M("% Today"),b=H(),n=x("div"),f=x("h3"),E=M("+"),T=x("span"),C=M(D),I=M("% Last 7 days"),P=H(),d=x("div"),$=x("h3"),S=M("+"),o=x("span"),m=M(r),V=M("% Last 30 days"),w=H(),A=x("div"),this.h()},l(L){e=y(L,"DIV",{class:!0});var t=k(e);s=y(t,"DIV",{class:!0});var j=k(s);i=y(j,"H3",{class:!0});var W=k(i);v=U(W,"+"),p=y(W,"SPAN",{class:!0});var ee=k(p);u=U(ee,c),ee.forEach(l),_=U(W,"% Today"),W.forEach(l),j.forEach(l),b=N(t),n=y(t,"DIV",{class:!0});var J=k(n);f=y(J,"H3",{class:!0});var B=k(f);E=U(B,"+"),T=y(B,"SPAN",{class:!0});var X=k(T);C=U(X,D),X.forEach(l),I=U(B,"% Last 7 days"),B.forEach(l),J.forEach(l),P=N(t),d=y(t,"DIV",{class:!0});var Y=k(d);$=y(Y,"H3",{class:!0});var z=k($);S=U(z,"+"),o=y(z,"SPAN",{class:!0});var Z=k(o);m=U(Z,r),Z.forEach(l),V=U(z,"% Last 30 days"),z.forEach(l),Y.forEach(l),t.forEach(l),w=N(L),A=y(L,"DIV",{class:!0}),k(A).forEach(l),this.h()},h(){g(p,"class","text-green-600 dark:text-green-800"),g(i,"class","text-center w-fit"),g(s,"class","border border-neutral-200 dark:border-neutral-700 rounded-lg p-4 flex flex-row items-center justify-center"),g(T,"class","text-green-600 dark:text-green-800"),g(f,"class","text-center w-fit"),g(n,"class","border border-neutral-200 dark:border-neutral-700 rounded-lg p-4 flex flex-row items-center justify-center"),g(o,"class","text-green-600 dark:text-green-800"),g($,"class","text-center w-fit"),g(d,"class","border border-neutral-200 dark:border-neutral-700 rounded-lg p-4 flex flex-row items-center justify-center"),g(e,"class","w-full grid grid-cols-1 lg:grid-cols-3 p-4 gap-4"),g(A,"class","w-full")},m(L,t){O(L,e,t),a(e,s),a(s,i),a(i,v),a(i,p),a(p,u),a(i,_),a(e,b),a(e,n),a(n,f),a(f,E),a(f,T),a(T,C),a(f,I),a(e,P),a(e,d),a(d,$),a($,S),a($,o),a(o,m),a($,V),O(L,w,t),O(L,A,t),h[7](A)},p:fe,d(L){L&&(l(e),l(w),l(A)),h[7](null)}}}function ke(h){let e;return{c(){e=x("div"),this.h()},l(s){e=y(s,"DIV",{class:!0}),k(e).forEach(l),this.h()},h(){g(e,"class","")},m(s,i){O(s,e,i),h[8](e)},p:fe,d(s){s&&l(e),h[8](null)}}}function ue(h){let e,s=h[25].username+"",i,v,p,c=h[25].email+"",u,_;return{c(){e=x("div"),i=M(s),v=H(),p=x("div"),u=M(c),_=H(),this.h()},l(b){e=y(b,"DIV",{class:!0});var n=k(e);i=U(n,s),v=N(n),p=y(n,"DIV",{class:!0});var f=k(p);u=U(f,c),f.forEach(l),_=N(n),n.forEach(l),this.h()},h(){g(p,"class","opacity-0 group-hover:opacity-100 transition-all"),g(e,"class","w-full transition-all text-text-main dark:text-neutral-100 dark:hover:bg-neutral-600 hover:bg-neutral-100 p-2 cursor-pointer rounded-lg hover:px-4 relative group flex flex-row justify-between")},m(b,n){O(b,e,n),a(e,i),a(e,v),a(e,p),a(p,u),a(e,_)},p(b,n){n&2&&s!==(s=b[25].username+"")&&oe(i,s),n&2&&c!==(c=b[25].email+"")&&oe(u,c)},d(b){b&&l(e)}}}function Ee(h){let e,s,i,v,p,c,u,_,b,n,f,E,T,D,C,I,P;v=new le({props:{icon:"heroicons:magnifying-glass",class:"w-4 h-4"}});function d(r){h[10](r)}let $={label:"Search",type:"text",placeholder:"Search users by usernames",name:"search"};h[0]!==void 0&&($.value=h[0]),u=new ye({props:$}),ae.push(()=>xe(u,"value",d)),f=new le({props:{icon:"heroicons:x-mark",class:"w-6 h-6 transition-all group-hover:rotate-90"}});let S=ie(h[1]),o=[];for(let r=0;r<S.length;r+=1)o[r]=ue(ce(h,S,r));return{c(){e=x("h5"),s=M(`Premium users\r
                    `),i=x("button"),q(v.$$.fragment),p=H(),c=x("div"),q(u.$$.fragment),b=H(),n=x("button"),q(f.$$.fragment),T=H(),D=x("div");for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){e=y(r,"H5",{class:!0});var m=k(e);s=U(m,`Premium users\r
                    `),i=y(m,"BUTTON",{class:!0});var V=k(i);G(v.$$.fragment,V),V.forEach(l),m.forEach(l),p=N(r),c=y(r,"DIV",{class:!0});var w=k(c);G(u.$$.fragment,w),b=N(w),n=y(w,"BUTTON",{type:!0,class:!0});var A=k(n);G(f.$$.fragment,A),A.forEach(l),w.forEach(l),T=N(r),D=y(r,"DIV",{class:!0});var L=k(D);for(let t=0;t<o.length;t+=1)o[t].l(L);L.forEach(l),this.h()},h(){g(i,"class","w-fit button-secondary button-small"),g(e,"class","w-full border-b border-neutral-200 dark:border-neutral-700 flex flex-row p-2 items-center justify-between"),g(n,"type","button"),g(n,"class","group absolute top-1 right-1 button-close"),g(c,"class",E="bg-neutral-100 dark:bg-neutral-700 rounded-lg p-2.5 absolute top-0 left-0 right-0 transition-all "+(h[4]?"z-10 opacity-100":"-z-10 opacity-0")),g(D,"class","flex flex-col gap-0 overflow-y-auto overflow-x-hidden")},m(r,m){O(r,e,m),a(e,s),a(e,i),F(v,i,null),O(r,p,m),O(r,c,m),F(u,c,null),a(c,b),a(c,n),F(f,n,null),O(r,T,m),O(r,D,m);for(let V=0;V<o.length;V+=1)o[V]&&o[V].m(D,null);C=!0,I||(P=[ne(i,"click",h[9]),ne(n,"click",h[11])],I=!0)},p(r,m){const V={};if(!_&&m&1&&(_=!0,V.value=r[0],_e(()=>_=!1)),u.$set(V),(!C||m&16&&E!==(E="bg-neutral-100 dark:bg-neutral-700 rounded-lg p-2.5 absolute top-0 left-0 right-0 transition-all "+(r[4]?"z-10 opacity-100":"-z-10 opacity-0")))&&g(c,"class",E),m&2){S=ie(r[1]);let w;for(w=0;w<S.length;w+=1){const A=ce(r,S,w);o[w]?o[w].p(A,m):(o[w]=ue(A),o[w].c(),o[w].m(D,null))}for(;w<o.length;w+=1)o[w].d(1);o.length=S.length}},i(r){C||(K(v.$$.fragment,r),K(u.$$.fragment,r),K(f.$$.fragment,r),C=!0)},o(r){Q(v.$$.fragment,r),Q(u.$$.fragment,r),Q(f.$$.fragment,r),C=!1},d(r){r&&(l(e),l(p),l(c),l(T),l(D)),R(v),R(u),R(f),ve(o,r),I=!1,be(P)}}}function Ce(h){let e,s="",i,v,p,c,u,_,b,n,f,E,T,D,C,I,P;return _=new le({props:{icon:"heroicons:arrow-uturn-left",class:"w-6 h-6 transition-all group-hover:rotate-[360deg] duration-300"}}),E=new re({props:{class:"md:col-span-2",$$slots:{default:[De]},$$scope:{ctx:h}}}),D=new re({props:{$$slots:{default:[ke]},$$scope:{ctx:h}}}),I=new re({props:{class:"relative",$$slots:{default:[Ee]},$$scope:{ctx:h}}}),{c(){e=x("script"),e.innerHTML=s,v=H(),p=x("section"),c=x("div"),u=x("a"),q(_.$$.fragment),b=M(`\r
            Go back`),n=H(),f=x("div"),q(E.$$.fragment),T=H(),q(D.$$.fragment),C=H(),q(I.$$.fragment),this.h()},l(d){const $=he("svelte-1ex87jb",document.head);e=y($,"SCRIPT",{src:!0,"data-svelte-h":!0}),pe(e)!=="svelte-avrofd"&&(e.innerHTML=s),$.forEach(l),v=N(d),p=y(d,"SECTION",{class:!0});var S=k(p);c=y(S,"DIV",{class:!0});var o=k(c);u=y(o,"A",{href:!0,class:!0});var r=k(u);G(_.$$.fragment,r),b=U(r,`\r
            Go back`),r.forEach(l),n=N(o),f=y(o,"DIV",{class:!0});var m=k(f);G(E.$$.fragment,m),T=N(m),G(D.$$.fragment,m),C=N(m),G(I.$$.fragment,m),m.forEach(l),o.forEach(l),S.forEach(l),this.h()},h(){document.title="PCC - Admin dashboard",me(e.src,i="https://cdn.jsdelivr.net/npm/apexcharts")||g(e,"src",i),g(u,"href","../"),g(u,"class","button-secondary w-fit button-small group"),g(f,"class","w-full h-full grid grid-cols-1 lg:grid-cols-2 gap-6"),g(c,"class","max-w-screen-lg mx-auto flex flex-col gap-6"),g(p,"class","grow w-full py-8 px-4 lg:py-16 lg:px-6 space-y-6")},m(d,$){a(document.head,e),O(d,v,$),O(d,p,$),a(p,c),a(c,u),F(_,u,null),a(u,b),a(c,n),a(c,f),F(E,f,null),a(f,T),F(D,f,null),a(f,C),F(I,f,null),P=!0},p(d,[$]){const S={};$&268435460&&(S.$$scope={dirty:$,ctx:d}),E.$set(S);const o={};$&268435464&&(o.$$scope={dirty:$,ctx:d}),D.$set(o);const r={};$&268435475&&(r.$$scope={dirty:$,ctx:d}),I.$set(r)},i(d){P||(K(_.$$.fragment,d),K(E.$$.fragment,d),K(D.$$.fragment,d),K(I.$$.fragment,d),P=!0)},o(d){Q(_.$$.fragment,d),Q(E.$$.fragment,d),Q(D.$$.fragment,d),Q(I.$$.fragment,d),P=!1},d(d){d&&(l(v),l(p)),l(e),R(_),R(E),R(D),R(I)}}}const se=9;function Ie(h,e,s){let{data:i}=e,{users:v}=i,p=v.slice(0,se),c,u,_,b=!1;const n={};v.forEach(t=>{const j=t.joined.toISOString().split("T")[0];n[j]=(n[j]||0)+1});const f=Object.keys(n),E=Math.min(...f.filter(t=>new Date(t)>new Date(new Date().setDate(new Date().getDate()-30))).map(t=>new Date(t))),T=Math.max(new Date),D=[];for(let t=new Date(E);t<=T;t.setDate(t.getDate()+1)){const j=t.toISOString().split("T")[0];D.push(j)}const C=[];let I=0;D.forEach(t=>{const j=n[t]||0;I+=j,C.push({x:new Date(t).getDate()+"/"+(new Date(t).getMonth()+1),y:I})});const P=v.filter(t=>t.isPremium),d=t=>{t=Math.min(t+1,C.length);const j=C.map(W=>W.y);return Math.round((j.at(-1)-j.at(-t))/j.at(-t)*100)};let S={...{chart:{height:450,type:"line",toolbar:{show:!1}},colors:["#0da858"],dataLabels:{enabled:!0},stroke:{curve:"smooth"},grid:{borderColor:"#e7e7e7",row:{colors:["#f3f3f3","transparent"],opacity:.5}}},series:[{name:"Users",data:C}],title:{text:"Users progression",align:"left"},xaxis:{categories:Object.keys(n),title:{text:"Days"}},yaxis:{title:{text:"Users"},min:0,max:Math.max(...C.map(t=>t.y))}},o={series:[P.length,v.length-P.length],chart:{width:380,type:"pie"},labels:["Premium","Free"]};ge(()=>{new ApexCharts(c,S).render(),new ApexCharts(u,o).render()});function r(){if(!_){s(1,p=P.slice(0,se));return}const t=2,j=_.toLowerCase().split(" ");s(1,p=P.filter(W=>{const ee=W.username.toLowerCase().split(" ");for(let J=0;J<j.length;J++){const B=j[J];let X=!1;for(let Y=0;Y<ee.length;Y++){const z=ee[Y];if(z.includes(B)){X=!0;break}if(B.length-z.length<=t){let Z=0;for(let te=0;te<z.length&&!(z[te]!==B[te]&&(Z++,Z>t));te++);if(Z<=t){X=!0;break}}}if(!X)return!1}return!0}).slice(0,se))}function m(t){ae[t?"unshift":"push"](()=>{c=t,s(2,c)})}function V(t){ae[t?"unshift":"push"](()=>{u=t,s(3,u)})}const w=()=>{s(4,b=!b)};function A(t){_=t,s(0,_)}const L=()=>{s(4,b=!1),s(0,_="")};return h.$$set=t=>{"data"in t&&s(6,i=t.data)},h.$$.update=()=>{h.$$.dirty&1&&r()},[_,p,c,u,b,d,i,m,V,w,A,L]}class Le extends $e{constructor(e){super(),we(this,e,Ie,Ce,de,{data:6})}}export{Le as component};
