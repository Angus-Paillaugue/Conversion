import{s as ie,p as me,a as v,f as E,l as X,r as pe,d as w,c as y,g as N,h as J,m as Z,j as S,i as A,w as b,U as de,u as B,I as ne,N as ae,z as re,x as L}from"../chunks/scheduler.48e732d9.js";import{S as $e,i as _e,h as he,b as H,d as U,m as j,a as x,t as T,e as q,g as le,c as oe}from"../chunks/index.d806ca90.js";import{e as ue}from"../chunks/forms.e3321b62.js";import{n as se}from"../chunks/stores.cc8b6fab.js";import{M as ge}from"../chunks/Modal.f9da1938.js";import{C as W}from"../chunks/Card.33695d8a.js";import{A as ce}from"../chunks/Alert.91e35944.js";import{T as V}from"../chunks/TextInput.aba2b0c1.js";import{I as be}from"../chunks/Icon.c5b4ca42.js";import{S as fe}from"../chunks/Spinner.da9fd2c5.js";function we(u){let e;return{c(){e=X("Save")},l(t){e=Z(t,"Save")},m(t,s){A(t,e,s)},i:L,o:L,d(t){t&&w(e)}}}function ke(u){let e,t;return e=new fe({}),{c(){H(e.$$.fragment)},l(s){U(e.$$.fragment,s)},m(s,n){j(e,s,n),t=!0},i(s){t||(x(e.$$.fragment,s),t=!0)},o(s){T(e.$$.fragment,s),t=!1},d(s){q(e,s)}}}function Ce(u){var I,l,h,g;let e,t,s="Account",n,f,_,o,c,i,M,d,m,p,$,C,D,P;f=new V({props:{label:"Username",name:"email",placeholder:"Username",value:u[1].username,type:"text"}}),o=new V({props:{label:"E-mail",name:"email",placeholder:"E-mail",value:u[1].email,type:"email"}}),i=new ce({props:{display:((l=(I=u[0])==null?void 0:I.account)==null?void 0:l.success)??!1,type:"error",class:"mb-4",message:(g=(h=u[0])==null?void 0:h.account)==null?void 0:g.message}});const F=[ke,we],k=[];function R(a,r){return a[2]?0:1}return m=R(u),p=k[m]=F[m](u),{c(){e=E("form"),t=E("h3"),t.textContent=s,n=v(),H(f.$$.fragment),_=v(),H(o.$$.fragment),c=v(),H(i.$$.fragment),M=v(),d=E("button"),p.c(),this.h()},l(a){e=N(a,"FORM",{action:!0,method:!0,class:!0});var r=J(e);t=N(r,"H3",{"data-svelte-h":!0}),B(t)!=="svelte-zi5xq3"&&(t.textContent=s),n=y(r),U(f.$$.fragment,r),_=y(r),U(o.$$.fragment,r),c=y(r),U(i.$$.fragment,r),M=y(r),d=N(r,"BUTTON",{class:!0});var O=J(d);p.l(O),O.forEach(w),r.forEach(w),this.h()},h(){S(d,"class","button-primary w-full"),S(e,"action","?/save"),S(e,"method","POST"),S(e,"class","flex flex-col gap-4 h-fit w-full")},m(a,r){A(a,e,r),b(e,t),b(e,n),j(f,e,null),b(e,_),j(o,e,null),b(e,c),j(i,e,null),b(e,M),b(e,d),k[m].m(d,null),C=!0,D||(P=ne($=ue.call(null,e,u[6])),D=!0)},p(a,r){var K,Q,ee,te;const O={};r&2&&(O.value=a[1].username),f.$set(O);const z={};r&2&&(z.value=a[1].email),o.$set(z);const G={};r&1&&(G.display=((Q=(K=a[0])==null?void 0:K.account)==null?void 0:Q.success)??!1),r&1&&(G.message=(te=(ee=a[0])==null?void 0:ee.account)==null?void 0:te.message),i.$set(G);let Y=m;m=R(a),m!==Y&&(le(),T(k[Y],1,1,()=>{k[Y]=null}),oe(),p=k[m],p||(p=k[m]=F[m](a),p.c()),x(p,1),p.m(d,null)),$&&ae($.update)&&r&4&&$.update.call(null,a[6])},i(a){C||(x(f.$$.fragment,a),x(o.$$.fragment,a),x(i.$$.fragment,a),x(p),C=!0)},o(a){T(f.$$.fragment,a),T(o.$$.fragment,a),T(i.$$.fragment,a),T(p),C=!1},d(a){a&&w(e),q(f),q(o),q(i),k[m].d(),D=!1,P()}}}function ve(u){let e;return{c(){e=X("Change password")},l(t){e=Z(t,"Change password")},m(t,s){A(t,e,s)},i:L,o:L,d(t){t&&w(e)}}}function ye(u){let e,t;return e=new fe({}),{c(){H(e.$$.fragment)},l(s){U(e.$$.fragment,s)},m(s,n){j(e,s,n),t=!0},i(s){t||(x(e.$$.fragment,s),t=!0)},o(s){T(e.$$.fragment,s),t=!1},d(s){q(e,s)}}}function xe(u){var I,l,h,g;let e,t,s="Password",n,f,_,o,c,i,M,d,m,p,$,C,D,P;f=new V({props:{label:"Current password",name:"email",placeholder:"Current password",id:"currentPassword",type:"password"}}),o=new V({props:{label:"New password",name:"email",placeholder:"New password",id:"newPassword",type:"password"}}),i=new ce({props:{display:((l=(I=u[0])==null?void 0:I.password)==null?void 0:l.success)??!1,type:"error",class:"mb-4",message:(g=(h=u[0])==null?void 0:h.password)==null?void 0:g.message}});const F=[ye,ve],k=[];function R(a,r){return a[4]?0:1}return m=R(u),p=k[m]=F[m](u),{c(){e=E("form"),t=E("h3"),t.textContent=s,n=v(),H(f.$$.fragment),_=v(),H(o.$$.fragment),c=v(),H(i.$$.fragment),M=v(),d=E("button"),p.c(),this.h()},l(a){e=N(a,"FORM",{action:!0,method:!0,class:!0});var r=J(e);t=N(r,"H3",{"data-svelte-h":!0}),B(t)!=="svelte-n4071"&&(t.textContent=s),n=y(r),U(f.$$.fragment,r),_=y(r),U(o.$$.fragment,r),c=y(r),U(i.$$.fragment,r),M=y(r),d=N(r,"BUTTON",{class:!0});var O=J(d);p.l(O),O.forEach(w),r.forEach(w),this.h()},h(){S(d,"class","button-primary"),S(e,"action","?/password"),S(e,"method","POST"),S(e,"class","flex flex-col gap-4 h-fit w-full")},m(a,r){A(a,e,r),b(e,t),b(e,n),j(f,e,null),b(e,_),j(o,e,null),b(e,c),j(i,e,null),b(e,M),b(e,d),k[m].m(d,null),C=!0,D||(P=ne($=ue.call(null,e,u[7])),D=!0)},p(a,r){var G,Y,K,Q;const O={};r&1&&(O.display=((Y=(G=a[0])==null?void 0:G.password)==null?void 0:Y.success)??!1),r&1&&(O.message=(Q=(K=a[0])==null?void 0:K.password)==null?void 0:Q.message),i.$set(O);let z=m;m=R(a),m!==z&&(le(),T(k[z],1,1,()=>{k[z]=null}),oe(),p=k[m],p||(p=k[m]=F[m](a),p.c()),x(p,1),p.m(d,null)),$&&ae($.update)&&r&16&&$.update.call(null,a[7])},i(a){C||(x(f.$$.fragment,a),x(o.$$.fragment,a),x(i.$$.fragment,a),x(p),C=!0)},o(a){T(f.$$.fragment,a),T(o.$$.fragment,a),T(i.$$.fragment,a),T(p),C=!1},d(a){a&&w(e),q(f),q(o),q(i),k[m].d(),D=!1,P()}}}function Te(u){let e,t="Danger zone",s,n,f="Delete account",_,o;return{c(){e=E("h3"),e.textContent=t,s=v(),n=E("button"),n.textContent=f,this.h()},l(c){e=N(c,"H3",{"data-svelte-h":!0}),B(e)!=="svelte-nccdmv"&&(e.textContent=t),s=y(c),n=N(c,"BUTTON",{class:!0,"data-svelte-h":!0}),B(n)!=="svelte-1pp1igq"&&(n.textContent=f),this.h()},h(){S(n,"class","button-red")},m(c,i){A(c,e,i),A(c,s,i),A(c,n,i),_||(o=re(n,"click",u[8]),_=!0)},p:L,d(c){c&&(w(e),w(s),w(n)),_=!1,o()}}}function Oe(u){let e,t="Are you sure you want to delete your account?";return{c(){e=E("p"),e.textContent=t,this.h()},l(s){e=N(s,"P",{slot:!0,"data-svelte-h":!0}),B(e)!=="svelte-vrr03"&&(e.textContent=t),this.h()},h(){S(e,"slot","body")},m(s,n){A(s,e,n)},p:L,d(s){s&&w(e)}}}function Se(u){let e,t="No, cancel",s,n,f='<button class="button-red w-full" type="submit">Yes, delete</button>',_,o;return{c(){e=E("button"),e.textContent=t,s=v(),n=E("form"),n.innerHTML=f,this.h()},l(c){e=N(c,"BUTTON",{class:!0,"data-svelte-h":!0}),B(e)!=="svelte-1qe45nh"&&(e.textContent=t),s=y(c),n=N(c,"FORM",{action:!0,method:!0,"data-svelte-h":!0}),B(n)!=="svelte-cghggx"&&(n.innerHTML=f),this.h()},h(){S(e,"class","button-secondary"),S(n,"action","?/deleteAccount"),S(n,"method","POST")},m(c,i){A(c,e,i),A(c,s,i),A(c,n,i),_||(o=re(e,"click",u[9]),_=!0)},p:L,d(c){c&&(w(e),w(s),w(n)),_=!1,o()}}}function Pe(u){let e,t,s,n,f,_,o,c,i,M,d,m,p,$,C,D,P,F,k;n=new be({props:{icon:"heroicons:arrow-uturn-left",class:"w-6 h-6 transition-all group-hover:rotate-[360deg] duration-300"}}),o=new W({props:{$$slots:{default:[Ce]},$$scope:{ctx:u}}}),d=new W({props:{$$slots:{default:[xe]},$$scope:{ctx:u}}}),C=new W({props:{$$slots:{default:[Te]},$$scope:{ctx:u}}});function R(l){u[10](l)}let I={title:"Delete account",$$slots:{footer:[Se],body:[Oe]},$$scope:{ctx:u}};return u[3]!==void 0&&(I.status=u[3]),P=new ge({props:I}),me.push(()=>he(P,"status",R)),{c(){e=v(),t=E("section"),s=E("a"),H(n.$$.fragment),f=X(`\r
        Go back`),_=v(),H(o.$$.fragment),c=v(),i=E("hr"),M=v(),H(d.$$.fragment),m=v(),p=E("hr"),$=v(),H(C.$$.fragment),D=v(),H(P.$$.fragment),this.h()},l(l){pe("svelte-1nqepv7",document.head).forEach(w),e=y(l),t=N(l,"SECTION",{class:!0});var g=J(t);s=N(g,"A",{href:!0,class:!0});var a=J(s);U(n.$$.fragment,a),f=Z(a,`\r
        Go back`),a.forEach(w),_=y(g),U(o.$$.fragment,g),c=y(g),i=N(g,"HR",{}),M=y(g),U(d.$$.fragment,g),m=y(g),p=N(g,"HR",{}),$=y(g),U(C.$$.fragment,g),g.forEach(w),D=y(l),U(P.$$.fragment,l),this.h()},h(){document.title="PCC - Settings",S(s,"href","/dashboard"),S(s,"class","button-secondary button-small group w-fit mb-6"),S(t,"class","grow w-full py-8 px-4 lg:py-16 lg:px-6 max-w-screen-lg mx-auto")},m(l,h){A(l,e,h),A(l,t,h),b(t,s),j(n,s,null),b(s,f),b(t,_),j(o,t,null),b(t,c),b(t,i),b(t,M),j(d,t,null),b(t,m),b(t,p),b(t,$),j(C,t,null),A(l,D,h),j(P,l,h),k=!0},p(l,[h]){const g={};h&2055&&(g.$$scope={dirty:h,ctx:l}),o.$set(g);const a={};h&2065&&(a.$$scope={dirty:h,ctx:l}),d.$set(a);const r={};h&2056&&(r.$$scope={dirty:h,ctx:l}),C.$set(r);const O={};h&2056&&(O.$$scope={dirty:h,ctx:l}),!F&&h&8&&(F=!0,O.status=l[3],de(()=>F=!1)),P.$set(O)},i(l){k||(x(n.$$.fragment,l),x(o.$$.fragment,l),x(d.$$.fragment,l),x(C.$$.fragment,l),x(P.$$.fragment,l),k=!0)},o(l){T(n.$$.fragment,l),T(o.$$.fragment,l),T(d.$$.fragment,l),T(C.$$.fragment,l),T(P.$$.fragment,l),k=!1},d(l){l&&(w(e),w(t),w(D)),q(n),q(o),q(d),q(C),q(P,l)}}}function Ee(u,e,t){let{data:s}=e,{form:n}=e,{user:f}=s,_=!1,o=!1,c=!1;const i=()=>(t(2,_=!0),async({update:$})=>{t(2,_=!1),$({reset:!1})}),M=()=>(t(4,c=!0),async({update:$})=>{t(4,c=!1),$({reset:!1})}),d=()=>{t(3,o=!0)},m=()=>{t(3,o=!1)};function p($){o=$,t(3,o)}return u.$$set=$=>{"data"in $&&t(5,s=$.data),"form"in $&&t(0,n=$.form)},u.$$.update=()=>{u.$$.dirty&1&&n&&(console.log(Object.keys(n),Object.keys(n).includes("account")),Object.keys(n).includes("account")?(t(1,f.username=n.formData.username,f),t(1,f.email=n.formData.email,f),n.account.success===!0&&se("success","Settings saved successfully!")):Object.keys(n).includes("password")&&n.password.success===!0&&se("success","Password changed successfully!"))},[n,f,_,o,c,s,i,M,d,m,p]}class Re extends $e{constructor(e){super(),_e(this,e,Ee,Pe,ie,{data:5,form:0})}}export{Re as component};
