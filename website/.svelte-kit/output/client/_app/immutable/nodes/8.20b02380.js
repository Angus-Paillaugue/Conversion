import{s as ue,f as g,a as V,l as J,r as ce,g as b,u as R,d as v,c as H,h as C,m as K,v as de,j as u,w as a,i as X,B as $,x as te,L as he,o as fe,O as re,C as pe,n as se,p as le}from"../chunks/scheduler.c54fe263.js";import{e as ae}from"../chunks/each.d996bcbb.js";import{S as me,i as ve}from"../chunks/index.382b5808.js";function ne(c,r,s){const _=c.slice();return _[25]=r[s],_}function oe(c){let r,s,_,h,d,n,m='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 transition-all group-hover:rotate-180"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>',k,f;return{c(){r=g("div"),s=g("div"),_=J(`Search :\r
                            `),h=g("input"),d=V(),n=g("button"),n.innerHTML=m,this.h()},l(t){r=b(t,"DIV",{class:!0});var p=C(r);s=b(p,"DIV",{class:!0});var x=C(s);_=K(x,`Search :\r
                            `),h=b(x,"INPUT",{type:!0,autocomplete:!0,name:!0,class:!0,placeholder:!0}),d=H(x),n=b(x,"BUTTON",{class:!0,"data-svelte-h":!0}),R(n)!=="svelte-1hkw89p"&&(n.innerHTML=m),x.forEach(v),p.forEach(v),this.h()},h(){u(h,"type","text"),u(h,"autocomplete","off"),u(h,"name","search"),u(h,"class","border text-sm rounded-lg block w-full p-1.5 bg-white dark:bg-neutral-800 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:text-white focus:ring-primary-500 focus:border-primary-500 focus:outline-none outline-none transition-all caret-primary-600 focus:ring-offset-white focus:ring-offset-2 focus:ring-2 mt-1"),u(h,"placeholder","Search users by usernames"),u(n,"class","absolute top-0 right-0 group"),u(s,"class","relative w-full h-full text-sm text-text-main dark:text-neutral-100"),u(r,"class","bg-neutral-100 dark:bg-neutral-700 rounded-lg p-2 absolute top-0 left-0 right-0")},m(t,p){X(t,r,p),a(r,s),a(s,_),a(s,h),re(h,c[0]),a(s,d),a(s,n),k||(f=[$(h,"input",c[9]),$(n,"click",c[10])],k=!0)},p(t,p){p&1&&h.value!==t[0]&&re(h,t[0])},d(t){t&&v(r),k=!1,pe(f)}}}function ie(c){let r,s=c[25].username+"",_,h,d,n=c[25].email+"",m,k;return{c(){r=g("div"),_=J(s),h=V(),d=g("div"),m=J(n),k=V(),this.h()},l(f){r=b(f,"DIV",{class:!0});var t=C(r);_=K(t,s),h=H(t),d=b(t,"DIV",{class:!0});var p=C(d);m=K(p,n),p.forEach(v),k=H(t),t.forEach(v),this.h()},h(){u(d,"class","opacity-0 group-hover:opacity-100 transition-all"),u(r,"class","w-full transition-all text-text-main dark:text-neutral-100 dark:hover:bg-neutral-600 hover:bg-neutral-100 p-2 cursor-pointer rounded-lg hover:px-4 relative group flex flex-row justify-between")},m(f,t){X(f,r,t),a(r,_),a(r,h),a(r,d),a(d,m),a(r,k)},p(f,t){t&2&&s!==(s=f[25].username+"")&&se(_,s),t&2&&n!==(n=f[25].email+"")&&se(m,n)},d(f){f&&v(r)}}}function ge(c){let r,s="",_,h,d,n,m,k=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 transition-all group-hover:rotate-[360deg] duration-300"><path stroke-linecap="round" stroke-linejoin="round" d="M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"></path></svg>
            Go back`,f,t,p,x,W,O,L,B,y,D,F,I,G='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>',q,A,S,z,Q,w=c[4]&&oe(c),e=ae(c[1]),l=[];for(let o=0;o<e.length;o+=1)l[o]=ie(ne(c,e,o));return{c(){r=g("script"),r.innerHTML=s,h=V(),d=g("section"),n=g("div"),m=g("a"),m.innerHTML=k,f=V(),t=g("div"),p=g("div"),x=g("div"),W=V(),O=g("div"),L=g("div"),B=V(),y=g("div"),D=g("h5"),F=J(`Premium users\r
                    `),I=g("button"),I.innerHTML=G,q=V(),w&&w.c(),A=V(),S=g("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){const E=ce("svelte-1ex87jb",document.head);r=b(E,"SCRIPT",{src:!0,"data-svelte-h":!0}),R(r)!=="svelte-avrofd"&&(r.innerHTML=s),E.forEach(v),h=H(o),d=b(o,"SECTION",{class:!0});var i=C(d);n=b(i,"DIV",{class:!0});var T=C(n);m=b(T,"A",{href:!0,class:!0,"data-svelte-h":!0}),R(m)!=="svelte-ptbhqv"&&(m.innerHTML=k),f=H(T),t=b(T,"DIV",{class:!0});var M=C(t);p=b(M,"DIV",{class:!0});var N=C(p);x=b(N,"DIV",{class:!0}),C(x).forEach(v),N.forEach(v),W=H(M),O=b(M,"DIV",{class:!0});var U=C(O);L=b(U,"DIV",{class:!0}),C(L).forEach(v),U.forEach(v),B=H(M),y=b(M,"DIV",{class:!0});var j=C(y);D=b(j,"H5",{class:!0});var P=C(D);F=K(P,`Premium users\r
                    `),I=b(P,"BUTTON",{class:!0,"data-svelte-h":!0}),R(I)!=="svelte-1y07h73"&&(I.innerHTML=G),P.forEach(v),q=H(j),w&&w.l(j),A=H(j),S=b(j,"DIV",{class:!0});var ee=C(S);for(let Y=0;Y<l.length;Y+=1)l[Y].l(ee);ee.forEach(v),j.forEach(v),M.forEach(v),T.forEach(v),i.forEach(v),this.h()},h(){document.title="PCC - Admin dashboard",de(r.src,_="https://cdn.jsdelivr.net/npm/apexcharts")||u(r,"src",_),u(m,"href","../"),u(m,"class","button-secondary w-fit button-small group"),u(x,"class","w-full"),u(p,"class","lg:col-span-2 border border-neutral-200 dark:border-neutral-700 rounded-lg"),u(L,"class",""),u(O,"class","border border-neutral-200 dark:border-neutral-700 rounded-lg p-4"),u(I,"class","w-fit button-secondary button-small"),u(D,"class","w-full border-b border-neutral-200 dark:border-neutral-700 flex flex-row p-2 items-center justify-between"),u(S,"class","flex flex-col gap-0 overflow-y-auto overflow-x-hidden"),u(y,"class","h-full flex flex-col gap-2 border border-neutral-200 dark:border-neutral-700 rounded-lg max-h-[450px] p-4 relative"),u(t,"class","w-full h-full grid grid-cols-1 lg:grid-cols-2 gap-6"),u(n,"class","max-w-screen-lg mx-auto flex flex-col gap-6"),u(d,"class","grow w-full py-8 px-4 lg:py-16 lg:px-6 space-y-6")},m(o,E){a(document.head,r),X(o,h,E),X(o,d,E),a(d,n),a(n,m),a(n,f),a(n,t),a(t,p),a(p,x),c[6](x),a(t,W),a(t,O),a(O,L),c[7](L),a(t,B),a(t,y),a(y,D),a(D,F),a(D,I),a(y,q),w&&w.m(y,null),a(y,A),a(y,S);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(S,null);z||(Q=$(I,"click",c[8]),z=!0)},p(o,[E]){if(o[4]?w?w.p(o,E):(w=oe(o),w.c(),w.m(y,A)):w&&(w.d(1),w=null),E&2){e=ae(o[1]);let i;for(i=0;i<e.length;i+=1){const T=ne(o,e,i);l[i]?l[i].p(T,E):(l[i]=ie(T),l[i].c(),l[i].m(S,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=e.length}},i:te,o:te,d(o){o&&(v(h),v(d)),v(r),c[6](null),c[7](null),w&&w.d(),he(l,o),z=!1,Q()}}}const Z=9;function be(c,r,s){let{data:_}=r,{user:h,users:d}=_,n=d.slice(0,Z),m,k,f,t=!1;const p={};d.forEach(e=>{const l=e.joined.toISOString().split("T")[0];p[l]=(p[l]||0)+1});const x=Object.keys(p),W=Math.min(...x.map(e=>new Date(e))),O=Math.max(...x.map(e=>new Date(e))),L=[];for(let e=new Date(W);e<=O;e.setDate(e.getDate()+1)){const l=e.toISOString().split("T")[0];L.push(l)}const B=[];let y=0;L.forEach(e=>{const l=p[e]||0;y+=l,B.push({x:new Date(e).getDate()+"/"+(new Date(e).getMonth()+1),y})});const D=d.filter(e=>e.isPremium);let I={...{chart:{height:450,type:"line",toolbar:{show:!1}},colors:["#0da858"],dataLabels:{enabled:!0},stroke:{curve:"smooth"},grid:{borderColor:"#e7e7e7",row:{colors:["#f3f3f3","transparent"],opacity:.5}}},series:[{name:"Users",data:B}],title:{text:"Users progression",align:"left"},xaxis:{categories:Object.keys(p),title:{text:"Days"}},yaxis:{title:{text:"Users"},min:5,max:40}},G={series:[D.length,d.length-D.length],chart:{width:380,type:"pie"},labels:["Premium","Free"]};fe(()=>{new ApexCharts(m,I).render(),new ApexCharts(k,G).render()});function q(){if(!f){s(1,n=D.slice(0,Z));return}const e=2,l=f.toLowerCase().split(" ");s(1,n=D.filter(o=>{const E=o.username.toLowerCase().split(" ");for(let i=0;i<l.length;i++){const T=l[i];let M=!1;for(let N=0;N<E.length;N++){const U=E[N];if(U.includes(T)){M=!0;break}if(T.length-U.length<=e){let j=0;for(let P=0;P<U.length&&!(U[P]!==T[P]&&(j++,j>e));P++);if(j<=e){M=!0;break}}}if(!M)return!1}return!0}).slice(0,Z))}function A(e){le[e?"unshift":"push"](()=>{m=e,s(2,m)})}function S(e){le[e?"unshift":"push"](()=>{k=e,s(3,k)})}const z=()=>{s(4,t=!t)};function Q(){f=this.value,s(0,f)}const w=()=>{s(4,t=!1),s(0,f="")};return c.$$set=e=>{"data"in e&&s(5,_=e.data)},c.$$.update=()=>{c.$$.dirty&1&&q()},[f,n,m,k,t,_,A,S,z,Q,w]}class xe extends me{constructor(r){super(),ve(this,r,be,ge,ue,{data:5})}}export{xe as component};
