import{s as dt,p as ft,f as d,a as k,l as w,z as ne,r as ht,g as f,u as oe,d as o,c as E,h as v,m as b,A as ie,v as pt,j as t,O as ke,K as mt,w as r,i as S,P as st,B as Ce,n as Qe,Q as vt,C as $e,R as _t,x as et,e as at,k as ot,L as gt}from"../chunks/scheduler.513ec290.js";import{S as wt,i as bt,h as kt,b as Et,d as Ct,m as yt,a as Pt,t as Tt,e as At}from"../chunks/index.639a9d04.js";import{g as Lt}from"../chunks/globals.7f7f1b26.js";import{e as nt}from"../chunks/each.dbf224b2.js";import{n as Me}from"../chunks/stores.4a57f107.js";import{M as xt}from"../chunks/Modal.56980f8f.js";const{document:Ze}=Lt;function it(s,e,l){const i=s.slice();return i[25]=e[l],i}function Bt(s){let e,l,i,n,u="Upgrade";return{c(){e=ne("svg"),l=ne("path"),i=k(),n=d("a"),n.textContent=u,this.h()},l(c){e=ie(c,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=v(e);l=ie(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(l).forEach(o),a.forEach(o),i=E(c),n=f(c,"A",{href:!0,class:!0,"data-svelte-h":!0}),oe(n)!=="svelte-1dcn0u5"&&(n.textContent=u),this.h()},h(){t(l,"stroke-linecap","round"),t(l,"stroke-linejoin","round"),t(l,"d","M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"),t(e,"xmlns","http://www.w3.org/2000/svg"),t(e,"fill","none"),t(e,"viewBox","0 0 24 24"),t(e,"stroke-width","1.5"),t(e,"stroke","currentColor"),t(e,"class","w-6 h-4 inline-block"),t(n,"href","/payment"),t(n,"class","link w-fit")},m(c,a){S(c,e,a),r(e,l),S(c,i,a),S(c,n,a)},d(c){c&&(o(e),o(i),o(n))}}}function St(s){let e;return{c(){e=w("Update rates")},l(l){e=b(l,"Update rates")},m(l,i){S(l,e,i)},d(l){l&&o(e)}}}function Nt(s){let e,l,i;return{c(){e=w(`Updating rates\r
                    `),l=ne("svg"),i=ne("path"),this.h()},l(n){e=b(n,`Updating rates\r
                    `),l=ie(n,"svg",{fill:!0,class:!0,viewBox:!0,xmlns:!0});var u=v(l);i=ie(u,"path",{"clip-rule":!0,d:!0,fill:!0,"fill-rule":!0}),v(i).forEach(o),u.forEach(o),this.h()},h(){t(i,"clip-rule","evenodd"),t(i,"d","M15.165 8.53a.5.5 0 01-.404.58A7 7 0 1023 16a.5.5 0 011 0 8 8 0 11-9.416-7.874.5.5 0 01.58.404z"),t(i,"fill","currentColor"),t(i,"fill-rule","evenodd"),t(l,"fill","none"),t(l,"class","w-6 h-6 animate-spin"),t(l,"viewBox","0 0 32 32"),t(l,"xmlns","http://www.w3.org/2000/svg")},m(n,u){S(n,e,u),S(n,l,u),r(l,i)},d(n){n&&(o(e),o(l))}}}function jt(s){let e,l="No users found";return{c(){e=d("h4"),e.textContent=l,this.h()},l(i){e=f(i,"H4",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-5hhct2"&&(e.textContent=l),this.h()},h(){t(e,"class","mt-2")},m(i,n){S(i,e,n)},p:et,d(i){i&&o(e)}}}function Ot(s){let e,l,i,n=nt(s[5].slice(0,s[4])),u=[];for(let a=0;a<n.length;a+=1)u[a]=ut(it(s,n,a));let c=s[4]<s[5].length&&ct(s);return{c(){e=d("div");for(let a=0;a<u.length;a+=1)u[a].c();l=k(),c&&c.c(),i=at(),this.h()},l(a){e=f(a,"DIV",{class:!0,style:!0});var m=v(e);for(let h=0;h<u.length;h+=1)u[h].l(m);m.forEach(o),l=E(a),c&&c.l(a),i=at(),this.h()},h(){t(e,"class","grid mt-2 gap-4"),ot(e,"grid-template-rows","min-content"),ot(e,"grid-template-columns","repeat(auto-fill, minmax(300px, 1fr))")},m(a,m){S(a,e,m);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(e,null);S(a,l,m),c&&c.m(a,m),S(a,i,m)},p(a,m){if(m&5872){n=nt(a[5].slice(0,a[4]));let h;for(h=0;h<n.length;h+=1){const M=it(a,n,h);u[h]?u[h].p(M,m):(u[h]=ut(M),u[h].c(),u[h].m(e,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=n.length}a[4]<a[5].length?c?c.p(a,m):(c=ct(a),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null)},d(a){a&&(o(e),o(l),o(i)),gt(u,a),c&&c.d(a)}}}function It(s){let e;return{c(){e=w("Save")},l(l){e=b(l,"Save")},m(l,i){S(l,e,i)},d(l){l&&o(e)}}}function Mt(s){let e,l;return{c(){e=ne("svg"),l=ne("path"),this.h()},l(i){e=ie(i,"svg",{fill:!0,class:!0,viewBox:!0,xmlns:!0});var n=v(e);l=ie(n,"path",{"clip-rule":!0,d:!0,fill:!0,"fill-rule":!0}),v(l).forEach(o),n.forEach(o),this.h()},h(){t(l,"clip-rule","evenodd"),t(l,"d","M15.165 8.53a.5.5 0 01-.404.58A7 7 0 1023 16a.5.5 0 011 0 8 8 0 11-9.416-7.874.5.5 0 01.58.404z"),t(l,"fill","currentColor"),t(l,"fill-rule","evenodd"),t(e,"fill","none"),t(e,"class","w-6 h-6 animate-spin mx-auto"),t(e,"viewBox","0 0 32 32"),t(e,"xmlns","http://www.w3.org/2000/svg")},m(i,n){S(i,e,n),r(e,l)},d(i){i&&o(e)}}}function ut(s){let e,l,i,n,u,c,a,m,h,M,ue,Q,O,I,y,H,ve,ce,q,G,_e,ge,C,R,Ee,X,$,p,T,A,ee,x,N,j,L,te,B,D,ye,de,fe,we=new Date(s[25].joined).toLocaleString("fr-FR")+"",Z,F,le,he="Delete account",z,U,xe,K,Be,re;function qe(){return s[18](s[25])}function Se(Y,g){return Y[6]&&Y[9]===Y[25].id?Mt:It}let W=Se(s),V=W(s);function Ue(){return s[19](s[25])}return{c(){e=d("div"),l=d("label"),i=w(`Username :\r
                            `),n=d("input"),c=k(),a=d("label"),m=w(`E-mail :\r
                            `),h=d("input"),ue=k(),Q=d("label"),O=w(`Premium :\r
                            `),I=d("div"),y=d("select"),H=d("option"),ve=w("Yes"),q=d("option"),G=w("No"),ge=k(),C=ne("svg"),R=ne("path"),Ee=k(),X=d("label"),$=w(`Admin :\r
                            `),p=d("div"),T=d("select"),A=d("option"),ee=w("Yes"),N=d("option"),j=w("No"),te=k(),B=ne("svg"),D=ne("path"),ye=k(),de=d("p"),fe=w("Joined on : "),Z=w(we),F=k(),le=d("button"),le.textContent=he,z=k(),U=d("button"),V.c(),xe=k(),this.h()},l(Y){e=f(Y,"DIV",{class:!0,"data-user-id":!0});var g=v(e);l=f(g,"LABEL",{for:!0});var Pe=v(l);i=b(Pe,`Username :\r
                            `),n=f(Pe,"INPUT",{type:!0,autocomplete:!0,name:!0}),Pe.forEach(o),c=E(g),a=f(g,"LABEL",{for:!0});var pe=v(a);m=b(pe,`E-mail :\r
                            `),h=f(pe,"INPUT",{type:!0,autocomplete:!0,name:!0}),pe.forEach(o),ue=E(g),Q=f(g,"LABEL",{for:!0});var Te=v(Q);O=b(Te,`Premium :\r
                            `),I=f(Te,"DIV",{class:!0});var Ae=v(I);y=f(Ae,"SELECT",{name:!0,class:!0});var se=v(y);H=f(se,"OPTION",{});var De=v(H);ve=b(De,"Yes"),De.forEach(o),q=f(se,"OPTION",{});var Le=v(q);G=b(Le,"No"),Le.forEach(o),se.forEach(o),ge=E(Ae),C=ie(Ae,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var ae=v(C);R=ie(ae,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(R).forEach(o),ae.forEach(o),Ae.forEach(o),Te.forEach(o),Ee=E(g),X=f(g,"LABEL",{for:!0});var Ne=v(X);$=b(Ne,`Admin :\r
                            `),p=f(Ne,"DIV",{class:!0});var be=v(p);T=f(be,"SELECT",{name:!0,class:!0});var J=v(T);A=f(J,"OPTION",{});var Re=v(A);ee=b(Re,"Yes"),Re.forEach(o),N=f(J,"OPTION",{});var Ve=v(N);j=b(Ve,"No"),Ve.forEach(o),J.forEach(o),te=E(be),B=ie(be,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var _=v(B);D=ie(_,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(D).forEach(o),_.forEach(o),be.forEach(o),Ne.forEach(o),ye=E(g),de=f(g,"P",{class:!0});var P=v(de);fe=b(P,"Joined on : "),Z=b(P,we),P.forEach(o),F=E(g),le=f(g,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(le)!=="svelte-1wm0gt9"&&(le.textContent=he),z=E(g),U=f(g,"BUTTON",{class:!0});var me=v(U);V.l(me),me.forEach(o),xe=E(g),g.forEach(o),this.h()},h(){t(n,"type","text"),t(n,"autocomplete","off"),t(n,"name","username"),n.value=u=s[25].username,t(l,"for","username"),t(h,"type","text"),t(h,"autocomplete","off"),t(h,"name","email"),h.value=M=s[25].email,t(a,"for","email"),H.__value="true",ke(H,H.__value),H.selected=ce=s[25].isPremium,q.__value="false",ke(q,q.__value),q.selected=_e=!s[25].isPremium,t(y,"name","isPremium"),t(y,"class","appearance-none peer"),t(R,"stroke-linecap","round"),t(R,"stroke-linejoin","round"),t(R,"d","M19.5 8.25l-7.5 7.5-7.5-7.5"),t(C,"xmlns","http://www.w3.org/2000/svg"),t(C,"fill","none"),t(C,"viewBox","0 0 24 24"),t(C,"stroke-width","1.5"),t(C,"stroke","currentColor"),t(C,"class","w-4 h-4 absolute top-1/2 right-2 -translate-y-1/2 transition-all peer-focus:rotate-180 pointer-events-none"),t(I,"class","relative"),t(Q,"for","isPremium"),A.__value="true",ke(A,A.__value),A.selected=x=s[25].isAdmin,N.__value="false",ke(N,N.__value),N.selected=L=!s[25].isAdmin,t(T,"name","isAdmin"),t(T,"class","appearance-none peer"),t(D,"stroke-linecap","round"),t(D,"stroke-linejoin","round"),t(D,"d","M19.5 8.25l-7.5 7.5-7.5-7.5"),t(B,"xmlns","http://www.w3.org/2000/svg"),t(B,"fill","none"),t(B,"viewBox","0 0 24 24"),t(B,"stroke-width","1.5"),t(B,"stroke","currentColor"),t(B,"class","w-4 h-4 absolute top-1/2 right-2 -translate-y-1/2 transition-all peer-focus:rotate-180 pointer-events-none"),t(p,"class","relative"),t(X,"for","isAdmin"),t(de,"class","text-sm"),t(le,"class","button-red button-small"),t(U,"class","button-primary button-small"),t(e,"class","p-2 shadow-sm dark:shadow-none dark:border dark:border-neutral-700 rounded-lg flex flex-col gap-4"),t(e,"data-user-id",K=s[25].id)},m(Y,g){S(Y,e,g),r(e,l),r(l,i),r(l,n),r(e,c),r(e,a),r(a,m),r(a,h),r(e,ue),r(e,Q),r(Q,O),r(Q,I),r(I,y),r(y,H),r(H,ve),r(y,q),r(q,G),r(I,ge),r(I,C),r(C,R),r(e,Ee),r(e,X),r(X,$),r(X,p),r(p,T),r(T,A),r(A,ee),r(T,N),r(N,j),r(p,te),r(p,B),r(B,D),r(e,ye),r(e,de),r(de,fe),r(de,Z),r(e,F),r(e,le),r(e,z),r(e,U),V.m(U,null),r(e,xe),Be||(re=[Ce(le,"click",qe),Ce(U,"click",Ue)],Be=!0)},p(Y,g){s=Y,g&48&&u!==(u=s[25].username)&&n.value!==u&&(n.value=u),g&48&&M!==(M=s[25].email)&&h.value!==M&&(h.value=M),g&48&&ce!==(ce=s[25].isPremium)&&(H.selected=ce),g&48&&_e!==(_e=!s[25].isPremium)&&(q.selected=_e),g&48&&x!==(x=s[25].isAdmin)&&(A.selected=x),g&48&&L!==(L=!s[25].isAdmin)&&(N.selected=L),g&48&&we!==(we=new Date(s[25].joined).toLocaleString("fr-FR")+"")&&Qe(Z,we),W!==(W=Se(s))&&(V.d(1),V=W(s),V&&(V.c(),V.m(U,null))),g&48&&K!==(K=s[25].id)&&t(e,"data-user-id",K)},d(Y){Y&&o(e),V.d(),Be=!1,$e(re)}}}function ct(s){let e,l=`Load more
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg>`,i,n;return{c(){e=d("button"),e.innerHTML=l,this.h()},l(u){e=f(u,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-js37qg"&&(e.innerHTML=l),this.h()},h(){t(e,"class","button-secondary mx-auto w-fit hover:gap-4 button-small")},m(u,c){S(u,e,c),i||(n=Ce(e,"click",s[20]),i=!0)},p:et,d(u){u&&o(e),i=!1,n()}}}function Ut(s){var c;let e,l,i=(s[10]?(c=s[2])==null?void 0:c.filter(s[22])[0].username:"")+"",n,u;return{c(){e=d("p"),l=w("Are you sure you want to delete "),n=w(i),u=w("'s account ?"),this.h()},l(a){e=f(a,"P",{slot:!0});var m=v(e);l=b(m,"Are you sure you want to delete "),n=b(m,i),u=b(m,"'s account ?"),m.forEach(o),this.h()},h(){t(e,"slot","body")},m(a,m){S(a,e,m),r(e,l),r(e,n),r(e,u)},p(a,m){var h;m&1028&&i!==(i=(a[10]?(h=a[2])==null?void 0:h.filter(a[22])[0].username:"")+"")&&Qe(n,i)},d(a){a&&o(e)}}}function Dt(s){let e,l="No, cancel",i,n,u="Yes, delete",c,a;return{c(){e=d("button"),e.textContent=l,i=k(),n=d("button"),n.textContent=u,this.h()},l(m){e=f(m,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-epy9ji"&&(e.textContent=l),i=E(m),n=f(m,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(n)!=="svelte-14ride6"&&(n.textContent=u),this.h()},h(){t(e,"class","button-red"),t(n,"class","button-primary")},m(m,h){S(m,e,h),S(m,i,h),S(m,n,h),c||(a=[Ce(e,"click",s[21]),Ce(n,"click",s[13])],c=!0)},p:et,d(m){m&&(o(e),o(i),o(n)),c=!1,$e(a)}}}function Vt(s){let e,l="",i,n,u,c,a,m,h,M=s[11].username+"",ue,Q,O,I,y,H=s[11].isPremium?"Premium":"Basic",ve,ce,q,G,_e=`<a href="/dashboard/admin/charts" class="card-button"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"></path></svg>
                    Charts</a> <a href="/dashboard/admin/newsletter" class="card-button"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"></path></svg>
                    Newsletter</a> <a href="/dashboard/settings" class="card-button"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    Settings</a> <a href="/log-out" class="card-button"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"></path></svg>
                    Log-out</a>`,ge,C,R,Ee="Rates",X,$,p,T=new Date(s[3]).toLocaleString("fr-FR")+"",A,ee,x,N,j,L,te,B=s[5].length+"",D,ye,de,fe,we,Z,F,le,he,z,U,xe="Premium : *",K,Be="Premium : true",re,qe="Premium : false",Se,W,V,Ue,Y,g,Pe,pe,Te,Ae,se=!s[11].isPremium&&Bt();function De(_,P){return _[8]?Nt:St}let Le=De(s),ae=Le(s);function Ne(_,P){return _[5].length>0?Ot:jt}let be=Ne(s),J=be(s);function Re(_){s[23](_)}let Ve={title:"Delete account",$$slots:{default:[Dt],body:[Ut]},$$scope:{ctx:s}};return s[7]!==void 0&&(Ve.status=s[7]),g=new xt({props:Ve}),ft.push(()=>kt(g,"status",Re)),{c(){e=d("script"),e.innerHTML=l,n=k(),u=d("section"),c=d("div"),a=d("div"),m=d("h3"),h=w("Welcome "),ue=w(M),Q=k(),O=d("p"),I=w(`Current plan : \r
                `),y=d("span"),ve=w(H),ce=k(),se&&se.c(),q=k(),G=d("div"),G.innerHTML=_e,ge=k(),C=d("div"),R=d("h3"),R.textContent=Ee,X=k(),$=d("p"),p=w("Last updated "),A=w(T),ee=k(),x=d("button"),ae.c(),N=k(),j=d("div"),L=d("h3"),te=w("Users ("),D=w(B),ye=w(")"),de=k(),fe=d("label"),we=w(`Search :\r
            `),Z=d("div"),F=d("input"),le=k(),he=d("div"),z=d("select"),U=d("option"),U.textContent=xe,K=d("option"),K.textContent=Be,re=d("option"),re.textContent=qe,Se=k(),W=ne("svg"),V=ne("path"),Ue=k(),J.c(),Y=k(),Et(g.$$.fragment),this.h()},l(_){const P=ht("svelte-1ex87jb",Ze.head);e=f(P,"SCRIPT",{src:!0,"data-svelte-h":!0}),oe(e)!=="svelte-avrofd"&&(e.innerHTML=l),P.forEach(o),n=E(_),u=f(_,"SECTION",{class:!0});var me=v(u);c=f(me,"DIV",{class:!0});var ze=v(c);a=f(ze,"DIV",{class:!0});var je=v(a);m=f(je,"H3",{});var Ke=v(m);h=b(Ke,"Welcome "),ue=b(Ke,M),Ke.forEach(o),Q=E(je),O=f(je,"P",{});var He=v(O);I=b(He,`Current plan : \r
                `),y=f(He,"SPAN",{class:!0});var tt=v(y);ve=b(tt,H),tt.forEach(o),ce=E(He),se&&se.l(He),He.forEach(o),q=E(je),G=f(je,"DIV",{class:!0,"data-svelte-h":!0}),oe(G)!=="svelte-1bmmv1n"&&(G.innerHTML=_e),je.forEach(o),ge=E(ze),C=f(ze,"DIV",{class:!0});var Oe=v(C);R=f(Oe,"H3",{"data-svelte-h":!0}),oe(R)!=="svelte-1uyn3fb"&&(R.textContent=Ee),X=E(Oe),$=f(Oe,"P",{});var Ge=v($);p=b(Ge,"Last updated "),A=b(Ge,T),Ge.forEach(o),ee=E(Oe),x=f(Oe,"BUTTON",{class:!0});var lt=v(x);ae.l(lt),lt.forEach(o),Oe.forEach(o),ze.forEach(o),N=E(me),j=f(me,"DIV",{class:!0});var Ie=v(j);L=f(Ie,"H3",{});var We=v(L);te=b(We,"Users ("),D=b(We,B),ye=b(We,")"),We.forEach(o),de=E(Ie),fe=f(Ie,"LABEL",{for:!0});var Xe=v(fe);we=b(Xe,`Search :\r
            `),Z=f(Xe,"DIV",{class:!0});var Ye=v(Z);F=f(Ye,"INPUT",{type:!0,autocomplete:!0,name:!0,placeholder:!0}),le=E(Ye),he=f(Ye,"DIV",{class:!0});var Fe=v(he);z=f(Fe,"SELECT",{class:!0});var Je=v(z);U=f(Je,"OPTION",{"data-svelte-h":!0}),oe(U)!=="svelte-9rq0dv"&&(U.textContent=xe),K=f(Je,"OPTION",{"data-svelte-h":!0}),oe(K)!=="svelte-f4fxkt"&&(K.textContent=Be),re=f(Je,"OPTION",{"data-svelte-h":!0}),oe(re)!=="svelte-1gt3hol"&&(re.textContent=qe),Je.forEach(o),Se=E(Fe),W=ie(Fe,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var rt=v(W);V=ie(rt,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(V).forEach(o),rt.forEach(o),Fe.forEach(o),Ye.forEach(o),Xe.forEach(o),Ue=E(Ie),J.l(Ie),Ie.forEach(o),me.forEach(o),Y=E(_),Ct(g.$$.fragment,_),this.h()},h(){Ze.title="PCC - Admin dashboard",pt(e.src,i="https://cdn.jsdelivr.net/npm/apexcharts")||t(e,"src",i),t(y,"class","font-semibold"),t(G,"class","grid darp-2 md:gap-4 grid-cols-1 md:grid-cols-2 mt-4"),t(a,"class","rounded-lg w-full border-neutral-200 dark:border-neutral-700 border md:p-10 p-6 h-full"),t(x,"class","button-primary mt-auto"),x.disabled=s[8],t(C,"class","rounded-lg w-full border-neutral-200 dark:border-neutral-700 border flex flex-col gap-2 md:p-10 p-6 h-full"),t(c,"class","grid grid-cols-1 lg:grid-cols-2 gap-4 max-w-screen-lg mx-auto"),t(F,"type","text"),t(F,"autocomplete","off"),t(F,"name","search"),t(F,"placeholder","Search users by usernames or emails"),U.__value="*",ke(U,U.__value),K.__value="true",ke(K,K.__value),re.__value="false",ke(re,re.__value),t(z,"class","appearance-none peer w-full sm:w-fit pr-6"),s[1]===void 0&&mt(()=>s[17].call(z)),t(V,"stroke-linecap","round"),t(V,"stroke-linejoin","round"),t(V,"d","M19.5 8.25l-7.5 7.5-7.5-7.5"),t(W,"xmlns","http://www.w3.org/2000/svg"),t(W,"fill","none"),t(W,"viewBox","0 0 24 24"),t(W,"stroke-width","1.5"),t(W,"stroke","currentColor"),t(W,"class","w-4 h-4 absolute top-1/2 right-2 -translate-y-1/2 transition-all peer-focus:rotate-180 pointer-events-none"),t(he,"class","relative"),t(Z,"class","flex flex-col sm:flex-row gap-4 mt-1"),t(fe,"for","search"),t(j,"class","max-w-screen-lg mx-auto flex flex-col gap-2 h-fit p-4 rounded-lg border border-neutral-200 dark:border-neutral-700"),t(u,"class","grow w-full py-8 px-4 lg:py-16 lg:px-6 space-y-6")},m(_,P){r(Ze.head,e),S(_,n,P),S(_,u,P),r(u,c),r(c,a),r(a,m),r(m,h),r(m,ue),r(a,Q),r(a,O),r(O,I),r(O,y),r(y,ve),r(O,ce),se&&se.m(O,null),r(a,q),r(a,G),r(c,ge),r(c,C),r(C,R),r(C,X),r(C,$),r($,p),r($,A),r(C,ee),r(C,x),ae.m(x,null),r(u,N),r(u,j),r(j,L),r(L,te),r(L,D),r(L,ye),r(j,de),r(j,fe),r(fe,we),r(fe,Z),r(Z,F),ke(F,s[0]),r(Z,le),r(Z,he),r(he,z),r(z,U),r(z,K),r(z,re),st(z,s[1],!0),r(he,Se),r(he,W),r(W,V),r(j,Ue),J.m(j,null),S(_,Y,P),yt(g,_,P),pe=!0,Te||(Ae=[Ce(x,"click",s[14]),Ce(F,"input",s[16]),Ce(z,"change",s[17])],Te=!0)},p(_,[P]){(!pe||P&8)&&T!==(T=new Date(_[3]).toLocaleString("fr-FR")+"")&&Qe(A,T),Le!==(Le=De(_))&&(ae.d(1),ae=Le(_),ae&&(ae.c(),ae.m(x,null))),(!pe||P&256)&&(x.disabled=_[8]),(!pe||P&32)&&B!==(B=_[5].length+"")&&Qe(D,B),P&1&&F.value!==_[0]&&ke(F,_[0]),P&2&&st(z,_[1]),be===(be=Ne(_))&&J?J.p(_,P):(J.d(1),J=be(_),J&&(J.c(),J.m(j,null)));const me={};P&268436612&&(me.$$scope={dirty:P,ctx:_}),!Pe&&P&128&&(Pe=!0,me.status=_[7],vt(()=>Pe=!1)),g.$set(me)},i(_){pe||(Pt(g.$$.fragment,_),pe=!0)},o(_){Tt(g.$$.fragment,_),pe=!1},d(_){_&&(o(n),o(u),o(Y)),o(e),se&&se.d(),ae.d(),J.d(),At(g,_),Te=!1,$e(Ae)}}}function Ht(s,e,l){let{data:i}=e,{user:n,users:u,ratesUpdatedAt:c}=i,a=9,m=u.slice(0,a),h=!1,M=!1,ue=!1,Q,O,I,y;function H(p){l(6,h=!0);const T=document.querySelector(`[data-user-id="${p}"]`),A=T.querySelector('[name="username"]').value,ee=T.querySelector('[name="email"]').value,x=T.querySelector('[name="isPremium"]').value=="true",N=T.querySelector('[name="isAdmin"]').value=="true";fetch("/api/updateUser",{method:"PATCH",body:JSON.stringify({id:p,username:A,email:ee,isPremium:x,isAdmin:N})}).then(L=>L.json()).then(L=>{Me("success",L.message)}).catch(L=>{Me("error",L)}).finally(()=>{l(6,h=!1)})}function ve(){fetch("/api/deleteUser",{method:"DELETE",body:JSON.stringify({id:I})}).then(p=>p.json()).then(p=>{Me("success",p.message)}).catch(p=>{Me("error",p)}).finally(()=>{l(2,u=u.filter(p=>p.id!==I)),l(7,M=!1),l(10,I=void 0)})}function ce(){O||l(0,O=""),y||l(1,y="*");const p=2,T=O.toLowerCase().split(" ");l(5,m=u.filter(A=>y=="*"?!0:y==A.isPremium.toString()).filter(A=>{const ee=`${A.username} ${A.email}`.toLowerCase().split(" ");for(let x=0;x<T.length;x++){const N=T[x];let j=!1;for(let L=0;L<ee.length;L++){const te=ee[L];if(te.includes(N)){j=!0;break}if(N.length-te.length<=p){let B=0;for(let D=0;D<te.length&&!(te[D]!==N[D]&&(B++,B>p));D++);if(B<=p){j=!0;break}}}if(!j)return!1}return!0})),l(4,a=9)}function q(){l(8,ue=!0),fetch("/api/update-exchange-rates",{method:"POST"}).then(p=>p.json()).then(p=>{console.log(p),p.ok?(l(3,c=new Date),Me("success",p.message)):Me("error",p.message),l(8,ue=!1)})}function G(){O=this.value,l(0,O)}function _e(){y=_t(this),l(1,y)}const ge=p=>{l(10,I=p.id),l(7,M=!0)},C=p=>{H(p.id),l(9,Q=p.id)},R=()=>{l(4,a+=9)},Ee=()=>{l(7,M=!1)},X=p=>p.id===I;function $(p){M=p,l(7,M)}return s.$$set=p=>{"data"in p&&l(15,i=p.data)},s.$$.update=()=>{s.$$.dirty&1&&ce(),s.$$.dirty&2&&ce()},[O,y,u,c,a,m,h,M,ue,Q,I,n,H,ve,q,i,G,_e,ge,C,R,Ee,X,$]}class Jt extends wt{constructor(e){super(),bt(this,e,Ht,Vt,dt,{data:15})}}export{Jt as component};
