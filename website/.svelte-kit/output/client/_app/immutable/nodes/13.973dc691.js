import{s as z,f as S,g as x,h as E,d as f,i as C,x as T,S as de,T as me,o as le,p as re,E as Pe,F as Ie,G as je,H as Te,U as Ve,a as P,e as ee,r as De,c as I,l as M,u as K,m as R,j as h,w as _,B as Le,V as Me,W as Re,z as te,A as ne,n as Be}from"../chunks/scheduler.e544945c.js";import{S as O,i as A,a as B,t as q,c as He,b as J,d as Q,m as Z,e as $,h as Ne,g as qe}from"../chunks/index.721f4317.js";var xe="https://js.stripe.com/v3",Fe=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,ve="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Ye=function(){for(var e=document.querySelectorAll('script[src^="'.concat(xe,'"]')),t=0;t<e.length;t++){var n=e[t];if(Fe.test(n.src))return n}return null},ze=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(xe).concat(t);var l=document.head||document.body;if(!l)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return l.appendChild(n),n},Oe=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.1.11",startTime:t})},X=null,Ae=function(e){return X!==null||(X=new Promise(function(t,n){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe&&e&&console.warn(ve),window.Stripe){t(window.Stripe);return}try{var l=Ye();l&&e?console.warn(ve):l||(l=ze(e)),l.addEventListener("load",function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))}),l.addEventListener("error",function(){n(new Error("Failed to load Stripe.js"))})}catch(r){n(r);return}})),X},Ue=function(e,t,n){if(e===null)return null;var l=e.apply(void 0,t);return Oe(l,n),l},Ce=Promise.resolve().then(function(){return Ae(null)}),Ee=!1;Ce.catch(function(c){Ee||console.warn(c)});var We=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Ee=!0;var l=Date.now();return Ce.then(function(r){return Ue(r,t,l)})};function he(c,e,t,n,l={}){const r=t.create(e,l);return r.mount(c),r.on("change",s=>n("change",s)),r.on("ready",s=>n("ready",s)),r.on("focus",s=>n("focus",s)),r.on("blur",s=>n("blur",s)),r.on("escape",s=>n("escape",s)),r.on("click",s=>n("click",s)),r}const ke=typeof window>"u";function Ge(c){if(!ke)return c.registerAppInfo({name:"svelte-stripe-js",url:"https://svelte-stripe-js.vercel.app"})}function Xe(c){let e;return{c(){e=S("div")},l(t){e=x(t,"DIV",{}),E(e).forEach(f)},m(t,n){C(t,e,n),c[12](e)},p:T,i:T,o:T,d(t){t&&f(e),c[12](null)}}}function Ke(c,e,t){let{classes:n={}}=e,{style:l={}}=e,{placeholder:r="Card number"}=e,{disabled:s=!1}=e,{showIcon:o=!0}=e,{iconStyle:u="default"}=e,{element:d=null}=e,w;const g=de(),{elements:b}=me("stripe");le(()=>(t(1,d=he(w,"cardNumber",b,g,{classes:n,style:l,placeholder:r,disabled:s,showIcon:o,iconStyle:u})),()=>d.destroy()));function p(){d.blur()}function k(){d.clear()}function m(){d.destroy()}function i(){d.focus()}function y(a){re[a?"unshift":"push"](()=>{w=a,t(0,w)})}return c.$$set=a=>{"classes"in a&&t(2,n=a.classes),"style"in a&&t(3,l=a.style),"placeholder"in a&&t(4,r=a.placeholder),"disabled"in a&&t(5,s=a.disabled),"showIcon"in a&&t(6,o=a.showIcon),"iconStyle"in a&&t(7,u=a.iconStyle),"element"in a&&t(1,d=a.element)},[w,d,n,l,r,s,o,u,p,k,m,i,y]}class Je extends O{constructor(e){super(),A(this,e,Ke,Xe,z,{classes:2,style:3,placeholder:4,disabled:5,showIcon:6,iconStyle:7,element:1,blur:8,clear:9,destroy:10,focus:11})}get blur(){return this.$$.ctx[8]}get clear(){return this.$$.ctx[9]}get destroy(){return this.$$.ctx[10]}get focus(){return this.$$.ctx[11]}}function Qe(c){let e;return{c(){e=S("div")},l(t){e=x(t,"DIV",{}),E(e).forEach(f)},m(t,n){C(t,e,n),c[10](e)},p:T,i:T,o:T,d(t){t&&f(e),c[10](null)}}}function Ze(c,e,t){let{classes:n={}}=e,{style:l={}}=e,{placeholder:r="MM / YY"}=e,{disabled:s=!1}=e,{element:o=null}=e,u;const d=de(),{elements:w}=me("stripe");le(()=>(t(1,o=he(u,"cardExpiry",w,d,{classes:n,style:l,placeholder:r,disabled:s})),()=>o.destroy()));function g(){o.blur()}function b(){o.clear()}function p(){o.destroy()}function k(){o.focus()}function m(i){re[i?"unshift":"push"](()=>{u=i,t(0,u)})}return c.$$set=i=>{"classes"in i&&t(2,n=i.classes),"style"in i&&t(3,l=i.style),"placeholder"in i&&t(4,r=i.placeholder),"disabled"in i&&t(5,s=i.disabled),"element"in i&&t(1,o=i.element)},[u,o,n,l,r,s,g,b,p,k,m]}class $e extends O{constructor(e){super(),A(this,e,Ze,Qe,z,{classes:2,style:3,placeholder:4,disabled:5,element:1,blur:6,clear:7,destroy:8,focus:9})}get blur(){return this.$$.ctx[6]}get clear(){return this.$$.ctx[7]}get destroy(){return this.$$.ctx[8]}get focus(){return this.$$.ctx[9]}}function et(c){let e;return{c(){e=S("div")},l(t){e=x(t,"DIV",{}),E(e).forEach(f)},m(t,n){C(t,e,n),c[10](e)},p:T,i:T,o:T,d(t){t&&f(e),c[10](null)}}}function tt(c,e,t){let{classes:n={}}=e,{style:l={}}=e,{placeholder:r="CVC"}=e,{disabled:s=!1}=e,{element:o=null}=e,u;const d=de(),{elements:w}=me("stripe");le(()=>(t(1,o=he(u,"cardCvc",w,d,{classes:n,style:l,placeholder:r,disabled:s})),()=>o.destroy()));function g(){o.blur()}function b(){o.clear()}function p(){o.destroy()}function k(){o.focus()}function m(i){re[i?"unshift":"push"](()=>{u=i,t(0,u)})}return c.$$set=i=>{"classes"in i&&t(2,n=i.classes),"style"in i&&t(3,l=i.style),"placeholder"in i&&t(4,r=i.placeholder),"disabled"in i&&t(5,s=i.disabled),"element"in i&&t(1,o=i.element)},[u,o,n,l,r,s,g,b,p,k,m]}class nt extends O{constructor(e){super(),A(this,e,tt,et,z,{classes:2,style:3,placeholder:4,disabled:5,element:1,blur:6,clear:7,destroy:8,focus:9})}get blur(){return this.$$.ctx[6]}get clear(){return this.$$.ctx[7]}get destroy(){return this.$$.ctx[8]}get focus(){return this.$$.ctx[9]}}function lt(c){let e;const t=c[12].default,n=Pe(t,c,c[11],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,r){n&&n.m(l,r),e=!0},p(l,[r]){n&&n.p&&(!e||r&2048)&&Ie(n,t,l,l[11],e?Te(t,l[11],r,null):je(l[11]),null)},i(l){e||(B(n,l),e=!0)},o(l){q(n,l),e=!1},d(l){n&&n.d(l)}}}function rt(c,e,t){let n,{$$slots:l={},$$scope:r}=e,{stripe:s}=e,{theme:o="stripe"}=e,{variables:u={}}=e,{rules:d={}}=e,{labels:w="above"}=e,{loader:g="auto"}=e,{fonts:b=[]}=e,{locale:p="auto"}=e,{clientSecret:k=void 0}=e,{elements:m=ke?null:s.elements({appearance:n,clientSecret:k,fonts:b,loader:g,locale:p})}=e;return Ge(s),Ve("stripe",{stripe:s,elements:m}),c.$$set=i=>{"stripe"in i&&t(0,s=i.stripe),"theme"in i&&t(1,o=i.theme),"variables"in i&&t(2,u=i.variables),"rules"in i&&t(3,d=i.rules),"labels"in i&&t(4,w=i.labels),"loader"in i&&t(5,g=i.loader),"fonts"in i&&t(6,b=i.fonts),"locale"in i&&t(7,p=i.locale),"clientSecret"in i&&t(8,k=i.clientSecret),"elements"in i&&t(9,m=i.elements),"$$scope"in i&&t(11,r=i.$$scope)},c.$$.update=()=>{c.$$.dirty&30&&t(10,n={theme:o,variables:u,rules:d,labels:w}),c.$$.dirty&1664&&m&&m.update({appearance:n,locale:p})},[s,o,u,d,w,g,b,p,k,m,n,r,l]}class st extends O{constructor(e){super(),A(this,e,rt,lt,z,{stripe:0,theme:1,variables:2,rules:3,labels:4,loader:5,fonts:6,locale:7,clientSecret:8,elements:9})}}const it="pk_test_51O9nD6IXnCqZazStBYa3hgHJGkS8RoISi4mge2YTbC7xY62abc4HW9cNgQ31K5UxptR6toYh0TfgtotI9HsxDrOr00hER0mPr6";function we(c){let e,t,n,l="Pay by card",r,s,o,u,d="PCC Pro Version",w,g,b,p=(c[5]/100).toFixed(2)+"",k,m,i,y,a,v,Y="Total :",se,H,ie,be=(c[5]/100).toFixed(2)+"",ae,ce,N,D,U,oe,_e;return D=new st({props:{stripe:c[0],$$slots:{default:[ot]},$$scope:{ctx:c}}}),{c(){e=S("section"),t=S("div"),n=S("h2"),n.textContent=l,r=P(),s=S("div"),o=S("div"),u=S("p"),u.textContent=d,w=P(),g=S("p"),b=M("$"),k=M(p),m=P(),i=S("hr"),y=P(),a=S("div"),v=S("p"),v.textContent=Y,se=P(),H=S("p"),ie=M("$"),ae=M(be),ce=P(),N=S("form"),J(D.$$.fragment),this.h()},l(j){e=x(j,"SECTION",{class:!0});var L=E(e);t=x(L,"DIV",{class:!0});var V=E(t);n=x(V,"H2",{class:!0,"data-svelte-h":!0}),K(n)!=="svelte-b1suo7"&&(n.textContent=l),r=I(V),s=x(V,"DIV",{class:!0});var F=E(s);o=x(F,"DIV",{class:!0});var W=E(o);u=x(W,"P",{"data-svelte-h":!0}),K(u)!=="svelte-7qqdp9"&&(u.textContent=d),w=I(W),g=x(W,"P",{class:!0});var ue=E(g);b=R(ue,"$"),k=R(ue,p),ue.forEach(f),W.forEach(f),m=I(F),i=x(F,"HR",{class:!0}),y=I(F),a=x(F,"DIV",{class:!0});var G=E(a);v=x(G,"P",{"data-svelte-h":!0}),K(v)!=="svelte-1mbgsbw"&&(v.textContent=Y),se=I(G),H=x(G,"P",{class:!0});var fe=E(H);ie=R(fe,"$"),ae=R(fe,be),fe.forEach(f),G.forEach(f),F.forEach(f),ce=I(V),N=x(V,"FORM",{class:!0});var ge=E(N);Q(D.$$.fragment,ge),ge.forEach(f),V.forEach(f),L.forEach(f),this.h()},h(){h(n,"class","text-center"),h(g,"class","font-semibold"),h(o,"class","flex justify-between items-center px-2"),h(i,"class","my-1"),h(H,"class","font-semibold"),h(a,"class","flex justify-between items-center px-2"),h(s,"class","border border-neutral-200 roundedlg-md flex flex-col mt-4"),h(N,"class","flex flex-col gap-4 mt-4"),h(t,"class","rounded-lg border border-neutral-200 p-6"),h(e,"class","py-8 px-4 mx-auto max-w-xl lg:py-16 lg:px-6 w-full grow")},m(j,L){C(j,e,L),_(e,t),_(t,n),_(t,r),_(t,s),_(s,o),_(o,u),_(o,w),_(o,g),_(g,b),_(g,k),_(s,m),_(s,i),_(s,y),_(s,a),_(a,v),_(a,se),_(a,H),_(H,ie),_(H,ae),_(t,ce),_(t,N),Z(D,N,null),U=!0,oe||(_e=Le(N,"submit",Me(c[6])),oe=!0)},p(j,L){const V={};L&1&&(V.stripe=j[0]),L&542&&(V.$$scope={dirty:L,ctx:j}),D.$set(V)},i(j){U||(B(D.$$.fragment,j),U=!0)},o(j){q(D.$$.fragment,j),U=!1},d(j){j&&f(e),$(D),oe=!1,_e()}}}function ye(c){let e,t,n,l,r=c[3].message+"",s;return{c(){e=S("div"),t=te("svg"),n=te("path"),l=P(),s=M(r),this.h()},l(o){e=x(o,"DIV",{class:!0});var u=E(e);t=ne(u,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var d=E(t);n=ne(d,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(n).forEach(f),d.forEach(f),l=I(u),s=R(u,r),u.forEach(f),this.h()},h(){h(n,"stroke-linecap","round"),h(n,"stroke-linejoin","round"),h(n,"d","M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"),h(t,"xmlns","http://www.w3.org/2000/svg"),h(t,"fill","none"),h(t,"viewBox","0 0 24 24"),h(t,"stroke-width","1.5"),h(t,"stroke","currentColor"),h(t,"class","w-6 h-6"),h(e,"class","flex flex-row gap-2 items-center text-red-900 bg-red-100 border border-red-600 rounded-lg p-4 w-full")},m(o,u){C(o,e,u),_(e,t),_(t,n),_(e,l),_(e,s)},p(o,u){u&8&&r!==(r=o[3].message+"")&&Be(s,r)},d(o){o&&f(e)}}}function pe(c){let e,t=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"></path></svg>
                            Congrats! You are now a PCC Pro user! Click on &quot;Refresh Plan&quot; in the PCC extension for your purchase to take effect.`;return{c(){e=S("div"),e.innerHTML=t,this.h()},l(n){e=x(n,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-34yyke"&&(e.innerHTML=t),this.h()},h(){h(e,"class","flex flex-row gap-2 items-center text-green-900 bg-green-100 border border-green-600 rounded-lg p-4 w-full")},m(n,l){C(n,e,l)},d(n){n&&f(e)}}}function Se(c){let e;function t(r,s){return r[2]?ct:at}let n=t(c),l=n(c);return{c(){e=S("button"),l.c(),this.h()},l(r){e=x(r,"BUTTON",{class:!0});var s=E(e);l.l(s),s.forEach(f),this.h()},h(){h(e,"class","w-full button-primary"),e.disabled=c[2]},m(r,s){C(r,e,s),l.m(e,null)},p(r,s){n===(n=t(r))&&l?l.p(r,s):(l.d(1),l=n(r),l&&(l.c(),l.m(e,null))),s&4&&(e.disabled=r[2])},d(r){r&&f(e),l.d()}}}function at(c){let e,t=(c[5]/100).toFixed(2)+"",n,l;return{c(){e=M("Pay "),n=M(t),l=M(" €")},l(r){e=R(r,"Pay "),n=R(r,t),l=R(r," €")},m(r,s){C(r,e,s),C(r,n,s),C(r,l,s)},p:T,d(r){r&&(f(e),f(n),f(l))}}}function ct(c){let e,t;return{c(){e=te("svg"),t=te("path"),this.h()},l(n){e=ne(n,"svg",{fill:!0,class:!0,viewBox:!0,xmlns:!0});var l=E(e);t=ne(l,"path",{"clip-rule":!0,d:!0,fill:!0,"fill-rule":!0}),E(t).forEach(f),l.forEach(f),this.h()},h(){h(t,"clip-rule","evenodd"),h(t,"d","M15.165 8.53a.5.5 0 01-.404.58A7 7 0 1023 16a.5.5 0 011 0 8 8 0 11-9.416-7.874.5.5 0 01.58.404z"),h(t,"fill","currentColor"),h(t,"fill-rule","evenodd"),h(e,"fill","none"),h(e,"class","w-8 h-8 animate-spin"),h(e,"viewBox","0 0 32 32"),h(e,"xmlns","http://www.w3.org/2000/svg")},m(n,l){C(n,e,l),_(e,t)},p:T,d(n){n&&f(e)}}}function ot(c){let e,t,n,l,r,s,o,u,d,w,g,b;function p(a){c[8](a)}let k={classes:{base:"border rounded-lg w-full p-4 bg-neutral-100 border-neutral-300 placeholder-neutral-400"}};c[1]!==void 0&&(k.element=c[1]),e=new Je({props:k}),re.push(()=>Ne(e,"element",p)),r=new $e({props:{classes:{base:"border rounded-lg w-full p-2.5 bg-neutral-100 border-neutral-300 placeholder-neutral-400"}}}),o=new nt({props:{classes:{base:"border rounded-lg w-full p-2.5 bg-neutral-100 border-neutral-300 placeholder-neutral-400"}}});let m=c[3]&&ye(c),i=c[4]&&pe(),y=!c[4]&&Se(c);return{c(){J(e.$$.fragment),n=P(),l=S("div"),J(r.$$.fragment),s=P(),J(o.$$.fragment),u=P(),m&&m.c(),d=P(),i&&i.c(),w=P(),y&&y.c(),g=ee(),this.h()},l(a){Q(e.$$.fragment,a),n=I(a),l=x(a,"DIV",{class:!0});var v=E(l);Q(r.$$.fragment,v),s=I(v),Q(o.$$.fragment,v),v.forEach(f),u=I(a),m&&m.l(a),d=I(a),i&&i.l(a),w=I(a),y&&y.l(a),g=ee(),this.h()},h(){h(l,"class","flex flex-col md:flex-row gap-4")},m(a,v){Z(e,a,v),C(a,n,v),C(a,l,v),Z(r,l,null),_(l,s),Z(o,l,null),C(a,u,v),m&&m.m(a,v),C(a,d,v),i&&i.m(a,v),C(a,w,v),y&&y.m(a,v),C(a,g,v),b=!0},p(a,v){const Y={};!t&&v&2&&(t=!0,Y.element=a[1],Re(()=>t=!1)),e.$set(Y),a[3]?m?m.p(a,v):(m=ye(a),m.c(),m.m(d.parentNode,d)):m&&(m.d(1),m=null),a[4]?i||(i=pe(),i.c(),i.m(w.parentNode,w)):i&&(i.d(1),i=null),a[4]?y&&(y.d(1),y=null):y?y.p(a,v):(y=Se(a),y.c(),y.m(g.parentNode,g))},i(a){b||(B(e.$$.fragment,a),B(r.$$.fragment,a),B(o.$$.fragment,a),b=!0)},o(a){q(e.$$.fragment,a),q(r.$$.fragment,a),q(o.$$.fragment,a),b=!1},d(a){a&&(f(n),f(l),f(u),f(d),f(w),f(g)),$(e,a),$(r),$(o),m&&m.d(a),i&&i.d(a),y&&y.d(a)}}}function ut(c){let e,t,n,l=c[0]&&we(c);return{c(){e=P(),l&&l.c(),t=ee(),this.h()},l(r){De("svelte-14ih5ja",document.head).forEach(f),e=I(r),l&&l.l(r),t=ee(),this.h()},h(){document.title="PCC - Payment"},m(r,s){C(r,e,s),l&&l.m(r,s),C(r,t,s),n=!0},p(r,[s]){r[0]?l?(l.p(r,s),s&1&&B(l,1)):(l=we(r),l.c(),B(l,1),l.m(t.parentNode,t)):l&&(qe(),q(l,1,1,()=>{l=null}),He())},i(r){n||(B(l),n=!0)},o(r){q(l),n=!1},d(r){r&&(f(e),f(t)),l&&l.d(r)}}}async function ft(){const e=await(await fetch("/payment-intent",{method:"POST"})).json();return e.error?{error:e.message}:{clientSecret:e.clientSecret}}function dt(c,e,t){let{data:n}=e;const{premiumPrice:l}=n;let r,s,o=!1,u,d;le(async()=>{t(0,r=await We(it))});async function w(){if(o)return;t(2,o=!0),t(3,u=null);const b=await ft();if(b.error)t(3,u={message:b.error});else{const p=await r.confirmCardPayment(b.clientSecret,{payment_method:{card:s}});p.error?t(3,u=p.error):p.paymentIntent.status==="succeeded"?t(4,d=!0):t(3,u={message:"Payment failed"})}t(2,o=!1)}function g(b){s=b,t(1,s)}return c.$$set=b=>{"data"in b&&t(7,n=b.data)},[r,s,o,u,d,l,w,n,g]}class bt extends O{constructor(e){super(),A(this,e,dt,ut,z,{data:7})}}export{bt as component};
