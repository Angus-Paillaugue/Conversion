import{s as tt,p as de,a as Q,f as w,l as W,r as lt,d as _,c as P,g as k,h as O,m as Y,j as m,i as B,w as d,I as Ie,z as fe,U as ge,K as Xe,A as st,o as nt,L as Ze,M as xe,k as Qe,n as me,N as Me,u as le,x as Se,e as Pe}from"../chunks/scheduler.48e732d9.js";import{S as ot,i as rt,h as be,b as se,d as ne,m as oe,a as A,c as we,t as U,e as re,g as ke}from"../chunks/index.d806ca90.js";import{g as at}from"../chunks/globals.7f7f1b26.js";import{e as De}from"../chunks/each.7f778bc3.js";import{e as Ae}from"../chunks/forms.e3321b62.js";import{n as ie}from"../chunks/stores.cc8b6fab.js";import{c as ut}from"../chunks/copy.65aa4a8b.js";import{M as Ne}from"../chunks/Modal.f9da1938.js";import{T as it}from"../chunks/TextInput.aba2b0c1.js";import{T as $e}from"../chunks/Textarea.3014841e.js";import{I as He}from"../chunks/Icon.c5b4ca42.js";import{S as et}from"../chunks/Spinner.da9fd2c5.js";const{document:Ue}=at;function Fe(s,e,t){const l=s.slice();return l[37]=e[t],l[38]=e,l[39]=t,l}function Ve(s,e,t){const l=s.slice();return l[40]=e[t],l}function ft(s){let e,t='To be able to ask a question, you need to be <a href="/auth" class="link">logged-in</a>';return{c(){e=w("h3"),e.innerHTML=t},l(l){e=k(l,"H3",{"data-svelte-h":!0}),le(e)!=="svelte-hktqv9"&&(e.innerHTML=t)},m(l,n){B(l,e,n)},p:Se,d(l){l&&_(e)}}}function ct(s){let e,t="New question",l,n,i,u,o=s[0].length===0&&ze();return{c(){e=w("button"),e.textContent=t,l=Q(),o&&o.c(),n=Pe(),this.h()},l(r){e=k(r,"BUTTON",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1vi8tqu"&&(e.textContent=t),l=P(r),o&&o.l(r),n=Pe(),this.h()},h(){m(e,"class","button-primary")},m(r,f){B(r,e,f),B(r,l,f),o&&o.m(r,f),B(r,n,f),i||(u=fe(e,"click",s[17]),i=!0)},p(r,f){r[0].length===0?o||(o=ze(),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},d(r){r&&(_(e),_(l),_(n)),o&&o.d(r),i=!1,u()}}}function ze(s){let e,t="No questions for now";return{c(){e=w("h2"),e.textContent=t},l(l){e=k(l,"H2",{"data-svelte-h":!0}),le(e)!=="svelte-73zjnf"&&(e.textContent=t)},m(l,n){B(l,e,n)},d(l){l&&_(e)}}}function je(s){let e,t,l,n,i;t=new He({props:{icon:"heroicons:trash",class:"w-6 h-6 group-hover/button:text-red-600 transition-all"}});function u(){return s[18](s[37])}return{c(){e=w("button"),se(t.$$.fragment),this.h()},l(o){e=k(o,"BUTTON",{class:!0});var r=O(e);ne(t.$$.fragment,r),r.forEach(_),this.h()},h(){m(e,"class","absolute top-1 right-1 transition-all opacity-0 group-hover/question:opacity-100 group/button")},m(o,r){B(o,e,r),oe(t,e,null),l=!0,n||(i=fe(e,"click",u),n=!0)},p(o,r){s=o},i(o){l||(A(t.$$.fragment,o),l=!0)},o(o){U(t.$$.fragment,o),l=!1},d(o){o&&_(e),re(t),n=!1,i()}}}function pt(s){let e,t='To reply, please <a href="/auth" class="link">log-in</a>';return{c(){e=w("p"),e.innerHTML=t},l(l){e=k(l,"P",{"data-svelte-h":!0}),le(e)!=="svelte-1k8tzno"&&(e.innerHTML=t)},m(l,n){B(l,e,n)},p:Se,d(l){l&&_(e)}}}function ht(s){let e,t="Replie",l,n;function i(){return s[19](s[37])}return{c(){e=w("button"),e.textContent=t,this.h()},l(u){e=k(u,"BUTTON",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-afnqyf"&&(e.textContent=t),this.h()},h(){m(e,"class","button-secondary")},m(u,o){B(u,e,o),l||(n=fe(e,"click",i),l=!0)},p(u,o){s=u},d(u){u&&_(e),l=!1,n()}}}function Ge(s){let e,t,l,n,i;t=new He({props:{icon:"heroicons:trash",class:"w-6 h-6 group-hover/button:text-red-600 transition-all"}});function u(){return s[21](s[37],s[40])}return{c(){e=w("button"),se(t.$$.fragment),this.h()},l(o){e=k(o,"BUTTON",{class:!0});var r=O(e);ne(t.$$.fragment,r),r.forEach(_),this.h()},h(){m(e,"class","absolute top-1 right-1 transition-all opacity-0 group-hover/replie:opacity-100 group/button")},m(o,r){B(o,e,r),oe(t,e,null),l=!0,n||(i=fe(e,"click",u),n=!0)},p(o,r){s=o},i(o){l||(A(t.$$.fragment,o),l=!0)},o(o){U(t.$$.fragment,o),l=!1},d(o){o&&_(e),re(t),n=!1,i()}}}function We(s){var v;let e,t,l,n=s[40].user.username+"",i,u,o,r=new Date(s[40].at).toLocaleDateString()+"",f,M,y,b,H=s[40].message.replaceAll(`
`,"<br />")+"",T,D,h=s[40].user.username===((v=s[11])==null?void 0:v.username)&&Ge(s);return{c(){e=w("div"),h&&h.c(),t=Q(),l=w("h5"),i=W(n),u=W(" - "),o=w("small"),f=W(r),M=Q(),y=w("p"),b=new Ze(!1),T=Q(),this.h()},l(g){e=k(g,"DIV",{class:!0});var C=O(e);h&&h.l(C),t=P(C),l=k(C,"H5",{});var R=O(l);i=Y(R,n),u=Y(R," - "),o=k(R,"SMALL",{});var F=O(o);f=Y(F,r),F.forEach(_),R.forEach(_),M=P(C),y=k(C,"P",{});var V=O(y);b=xe(V,!1),V.forEach(_),T=P(C),C.forEach(_),this.h()},h(){b.a=null,m(e,"class","flex flex-col gap-2 border-b border-neutral-200 dark:border-neutral-700 group/replie relative")},m(g,C){B(g,e,C),h&&h.m(e,null),d(e,t),d(e,l),d(l,i),d(l,u),d(l,o),d(o,f),d(e,M),d(e,y),b.m(H,y),d(e,T),D=!0},p(g,C){var R;g[40].user.username===((R=g[11])==null?void 0:R.username)?h?(h.p(g,C),C[0]&1&&A(h,1)):(h=Ge(g),h.c(),A(h,1),h.m(e,t)):h&&(ke(),U(h,1,1,()=>{h=null}),we()),(!D||C[0]&1)&&n!==(n=g[40].user.username+"")&&me(i,n),(!D||C[0]&1)&&r!==(r=new Date(g[40].at).toLocaleDateString()+"")&&me(f,r),(!D||C[0]&1)&&H!==(H=g[40].message.replaceAll(`
`,"<br />")+"")&&b.p(H)},i(g){D||(A(h),D=!0)},o(g){U(h),D=!1},d(g){g&&_(e),h&&h.d()}}}function Ye(s){var ue;let e,t,l,n,i,u=s[37].title+"",o,r,f,M=s[37].description.replaceAll(`
`,"<br />")+"",y,b,H=s[37].postedBy.username+"",T,D,h,v=new Date(s[37].postedAt).toLocaleDateString()+"",g,C,R,F,V,E,j,K=s[37].replies.length+"",J,$,G,S,X,ce,pe,Z,he,ve,L=s[37].postedBy.username===((ue=s[11])==null?void 0:ue.username)&&je(s);function Te(N,I){return N[11]?ht:pt}let ae=Te(s)(s);G=new He({props:{icon:"heroicons:chevron-down",class:"w-6 h-6 transition-all "+(!s[37].hiddenReplies&&"rotate-180")}});function c(){return s[20](s[37],s[38],s[39])}let a=De(s[37].replies),p=[];for(let N=0;N<a.length;N+=1)p[N]=We(Ve(s,a,N));const ee=N=>U(p[N],1,1,()=>{p[N]=null});function te(...N){return s[22](s[37],...N)}return{c(){e=w("div"),t=w("div"),L&&L.c(),l=Q(),n=w("div"),i=w("h3"),o=W(u),r=Q(),f=new Ze(!1),y=Q(),b=w("h6"),T=W(H),D=W(" - "),h=w("small"),g=W(v),C=Q(),R=w("div"),ae.c(),F=Q(),V=w("div"),E=w("button"),j=W("Show replies ("),J=W(K),$=W(`)\r
                        `),se(G.$$.fragment),S=Q(),X=w("div");for(let N=0;N<p.length;N+=1)p[N].c();pe=Q(),this.h()},l(N){e=k(N,"DIV",{class:!0});var I=O(e);t=k(I,"DIV",{class:!0});var x=O(t);L&&L.l(x),l=P(x),n=k(x,"DIV",{class:!0});var q=O(n);i=k(q,"H3",{});var z=O(i);o=Y(z,u),z.forEach(_),r=P(q),f=xe(q,!1),y=P(q),b=k(q,"H6",{});var _e=O(b);T=Y(_e,H),D=Y(_e," - "),h=k(_e,"SMALL",{});var Oe=O(h);g=Y(Oe,v),Oe.forEach(_),_e.forEach(_),C=P(q),R=k(q,"DIV",{class:!0});var qe=O(R);ae.l(qe),qe.forEach(_),q.forEach(_),x.forEach(_),F=P(I),V=k(I,"DIV",{class:!0});var Re=O(V);E=k(Re,"BUTTON",{class:!0,type:!0});var Ee=O(E);j=Y(Ee,"Show replies ("),J=Y(Ee,K),$=Y(Ee,`)\r
                        `),ne(G.$$.fragment,Ee),Ee.forEach(_),S=P(Re),X=k(Re,"DIV",{class:!0,style:!0,"data-replie-container":!0});var Le=O(X);for(let Be=0;Be<p.length;Be+=1)p[Be].l(Le);Le.forEach(_),Re.forEach(_),pe=P(I),I.forEach(_),this.h()},h(){f.a=y,m(R,"class","w-full"),m(n,"class","flex flex-col gap-2"),m(t,"class","group/question flex flex-col gap-2"),m(E,"class","w-full flex flex-row gap-4 no-scale underline"),m(E,"type","button"),m(X,"class","flex flex-col gap-4 pl-2 w-full overflow-hidden transition-all"),Qe(X,"max-height",(s[4].length>0?s[37].hiddenReplies?"0":s[4].find(te).height:0)+"px"),m(X,"data-replie-container",ce=s[37].id),m(V,"class","flex flex-col gap-2"),m(e,"class","w-full flex flex-col gap-2 px-2 border-x border-neutral-200 dark:border-neutral-700 relative")},m(N,I){B(N,e,I),d(e,t),L&&L.m(t,null),d(t,l),d(t,n),d(n,i),d(i,o),d(n,r),f.m(M,n),d(n,y),d(n,b),d(b,T),d(b,D),d(b,h),d(h,g),d(n,C),d(n,R),ae.m(R,null),d(e,F),d(e,V),d(V,E),d(E,j),d(E,J),d(E,$),oe(G,E,null),d(V,S),d(V,X);for(let x=0;x<p.length;x+=1)p[x]&&p[x].m(X,null);d(e,pe),Z=!0,he||(ve=fe(E,"click",c),he=!0)},p(N,I){var q;s=N,s[37].postedBy.username===((q=s[11])==null?void 0:q.username)?L?(L.p(s,I),I[0]&1&&A(L,1)):(L=je(s),L.c(),A(L,1),L.m(t,l)):L&&(ke(),U(L,1,1,()=>{L=null}),we()),(!Z||I[0]&1)&&u!==(u=s[37].title+"")&&me(o,u),(!Z||I[0]&1)&&M!==(M=s[37].description.replaceAll(`
`,"<br />")+"")&&f.p(M),(!Z||I[0]&1)&&H!==(H=s[37].postedBy.username+"")&&me(T,H),(!Z||I[0]&1)&&v!==(v=new Date(s[37].postedAt).toLocaleDateString()+"")&&me(g,v),ae.p(s,I),(!Z||I[0]&1)&&K!==(K=s[37].replies.length+"")&&me(J,K);const x={};if(I[0]&1&&(x.class="w-6 h-6 transition-all "+(!s[37].hiddenReplies&&"rotate-180")),G.$set(x),I[0]&2573){a=De(s[37].replies);let z;for(z=0;z<a.length;z+=1){const _e=Ve(s,a,z);p[z]?(p[z].p(_e,I),A(p[z],1)):(p[z]=We(_e),p[z].c(),A(p[z],1),p[z].m(X,null))}for(ke(),z=a.length;z<p.length;z+=1)ee(z);we()}(!Z||I[0]&17)&&Qe(X,"max-height",(s[4].length>0?s[37].hiddenReplies?"0":s[4].find(te).height:0)+"px"),(!Z||I[0]&1&&ce!==(ce=s[37].id))&&m(X,"data-replie-container",ce)},i(N){if(!Z){A(L),A(G.$$.fragment,N);for(let I=0;I<a.length;I+=1)A(p[I]);Z=!0}},o(N){U(L),U(G.$$.fragment,N),p=p.filter(Boolean);for(let I=0;I<p.length;I+=1)U(p[I]);Z=!1},d(N){N&&_(e),L&&L.d(),ae.d(),re(G),Xe(p,N),he=!1,ve()}}}function mt(s){let e,t='<p><span class="text-red-600 font-semibold">WARNING</span> : This operation is irreversible. Are you sure you want to delete this replie ?</p>',l,n,i;return{c(){e=w("form"),e.innerHTML=t,this.h()},l(u){e=k(u,"FORM",{method:!0,slot:!0,id:!0,class:!0,action:!0,"data-svelte-h":!0}),le(e)!=="svelte-1ccx25i"&&(e.innerHTML=t),this.h()},h(){m(e,"method","POST"),m(e,"slot","body"),m(e,"id","deleteReplieForm"),m(e,"class","flex flex-col gap-4"),m(e,"action","?/deleteReplie")},m(u,o){B(u,e,o),n||(i=Ie(l=Ae.call(null,e,s[24])),n=!0)},p(u,o){l&&Me(l.update)&&o[0]&12&&l.update.call(null,u[24])},d(u){u&&_(e),n=!1,i()}}}function _t(s){let e,t="No, cancel",l,n,i="Yes, delete",u,o;return{c(){e=w("button"),e.textContent=t,l=Q(),n=w("button"),n.textContent=i,this.h()},l(r){e=k(r,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),le(e)!=="svelte-14ky8oi"&&(e.textContent=t),l=P(r),n=k(r,"BUTTON",{class:!0,type:!0,form:!0,"data-svelte-h":!0}),le(n)!=="svelte-l3fsyw"&&(n.textContent=i),this.h()},h(){m(e,"class","button-secondary"),m(e,"type","button"),m(n,"class","button-primary"),m(n,"type","submit"),m(n,"form","deleteReplieForm")},m(r,f){B(r,e,f),B(r,l,f),B(r,n,f),u||(o=fe(e,"click",s[23]),u=!0)},p:Se,d(r){r&&(_(e),_(l),_(n)),u=!1,o()}}}function dt(s){let e,t='<p><span class="text-red-600 font-semibold">WARNING</span> : This operation is irreversible. Are you sure you want to delete this question ?</p>',l,n,i;return{c(){e=w("form"),e.innerHTML=t,this.h()},l(u){e=k(u,"FORM",{method:!0,slot:!0,id:!0,action:!0,"data-svelte-h":!0}),le(e)!=="svelte-1dc9aoe"&&(e.innerHTML=t),this.h()},h(){m(e,"method","POST"),m(e,"slot","body"),m(e,"id","deleteQuestionForm"),m(e,"action","?/deleteQuestion")},m(u,o){B(u,e,o),n||(i=Ie(l=Ae.call(null,e,s[27])),n=!0)},p(u,o){l&&Me(l.update)&&o[0]&8&&l.update.call(null,u[27])},d(u){u&&_(e),n=!1,i()}}}function gt(s){let e,t="No, cancel",l,n,i="Yes, delete",u,o;return{c(){e=w("button"),e.textContent=t,l=Q(),n=w("button"),n.textContent=i,this.h()},l(r){e=k(r,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),le(e)!=="svelte-1ks6b4t"&&(e.textContent=t),l=P(r),n=k(r,"BUTTON",{class:!0,type:!0,form:!0,"data-svelte-h":!0}),le(n)!=="svelte-jl5qyx"&&(n.textContent=i),this.h()},h(){m(e,"class","button-secondary"),m(e,"type","button"),m(n,"class","button-primary"),m(n,"type","submit"),m(n,"form","deleteQuestionForm")},m(r,f){B(r,e,f),B(r,l,f),B(r,n,f),u||(o=fe(e,"click",s[26]),u=!0)},p:Se,d(r){r&&(_(e),_(l),_(n)),u=!1,o()}}}function bt(s){var V;let e,t,l,n,i,u,o=((V=s[1])==null?void 0:V.length)+"",r,f,M,y,b,H,T,D,h,v;function g(E){s[29](E)}let C={name:"title",placeholder:"Question title"};s[10]!==void 0&&(C.value=s[10]),t=new it({props:C}),de.push(()=>be(t,"value",g));function R(E){s[30](E)}let F={name:"description",placeholder:"Question content",rows:"6"};return s[1]!==void 0&&(F.value=s[1]),b=new $e({props:F}),de.push(()=>be(b,"value",R)),{c(){e=w("form"),se(t.$$.fragment),n=Q(),i=w("div"),u=w("span"),r=W(o),f=W("/"),M=W(ye),y=Q(),se(b.$$.fragment),this.h()},l(E){e=k(E,"FORM",{slot:!0,method:!0,class:!0,action:!0,id:!0});var j=O(e);ne(t.$$.fragment,j),n=P(j),i=k(j,"DIV",{class:!0});var K=O(i);u=k(K,"SPAN",{class:!0});var J=O(u);r=Y(J,o),f=Y(J,"/"),M=Y(J,ye),J.forEach(_),y=P(K),ne(b.$$.fragment,K),K.forEach(_),j.forEach(_),this.h()},h(){m(u,"class","absolute top-1 right-1 text-xs font-normal"),m(i,"class","relative"),m(e,"slot","body"),m(e,"method","POST"),m(e,"class","space-y-2"),m(e,"action","?/newQuestion"),m(e,"id","newQuestionForm")},m(E,j){B(E,e,j),oe(t,e,null),d(e,n),d(e,i),d(i,u),d(u,r),d(u,f),d(u,M),d(i,y),oe(b,i,null),D=!0,h||(v=Ie(T=Ae.call(null,e,s[31])),h=!0)},p(E,j){var $;const K={};!l&&j[0]&1024&&(l=!0,K.value=E[10],ge(()=>l=!1)),t.$set(K),(!D||j[0]&2)&&o!==(o=(($=E[1])==null?void 0:$.length)+"")&&me(r,o);const J={};!H&&j[0]&2&&(H=!0,J.value=E[1],ge(()=>H=!1)),b.$set(J),T&&Me(T.update)&&j[0]&128&&T.update.call(null,E[31])},i(E){D||(A(t.$$.fragment,E),A(b.$$.fragment,E),D=!0)},o(E){U(t.$$.fragment,E),U(b.$$.fragment,E),D=!1},d(E){E&&_(e),re(t),re(b),h=!1,v()}}}function Ke(s){let e,t;return e=new et({}),{c(){se(e.$$.fragment)},l(l){ne(e.$$.fragment,l)},m(l,n){oe(e,l,n),t=!0},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){U(e.$$.fragment,l),t=!1},d(l){re(e,l)}}}function vt(s){let e,t,l,n="Post",i,u,o=s[7]&&Ke();return{c(){e=w("button"),o&&o.c(),t=Q(),l=w("span"),l.textContent=n,this.h()},l(r){e=k(r,"BUTTON",{type:!0,class:!0,form:!0});var f=O(e);o&&o.l(f),t=P(f),l=k(f,"SPAN",{class:!0,"data-svelte-h":!0}),le(l)!=="svelte-1pzyyxo"&&(l.textContent=n),f.forEach(_),this.h()},h(){var r,f;m(l,"class","transition-all"),m(e,"type","submit"),m(e,"class","button-primary transition-all overflow-hidden w-full"),e.disabled=i=((r=s[1])==null?void 0:r.length)===0||((f=s[10])==null?void 0:f.length)===0,m(e,"form","newQuestionForm")},m(r,f){B(r,e,f),o&&o.m(e,null),d(e,t),d(e,l),u=!0},p(r,f){var M,y;r[7]?o?f[0]&128&&A(o,1):(o=Ke(),o.c(),A(o,1),o.m(e,t)):o&&(ke(),U(o,1,1,()=>{o=null}),we()),(!u||f[0]&1026&&i!==(i=((M=r[1])==null?void 0:M.length)===0||((y=r[10])==null?void 0:y.length)===0))&&(e.disabled=i)},i(r){u||(A(o),u=!0)},o(r){U(o),u=!1},d(r){r&&_(e),o&&o.d()}}}function wt(s){var v;let e,t,l,n=((v=s[1])==null?void 0:v.length)+"",i,u,o,r,f,M,y,b,H,T;function D(g){s[33](g)}let h={name:"description",placeholder:"Replie content",rows:"6"};return s[1]!==void 0&&(h.value=s[1]),f=new $e({props:h}),de.push(()=>be(f,"value",D)),{c(){e=w("form"),t=w("div"),l=w("span"),i=W(n),u=W("/"),o=W(ye),r=Q(),se(f.$$.fragment),this.h()},l(g){e=k(g,"FORM",{slot:!0,id:!0,method:!0,class:!0,action:!0});var C=O(e);t=k(C,"DIV",{class:!0});var R=O(t);l=k(R,"SPAN",{class:!0});var F=O(l);i=Y(F,n),u=Y(F,"/"),o=Y(F,ye),F.forEach(_),r=P(R),ne(f.$$.fragment,R),R.forEach(_),C.forEach(_),this.h()},h(){m(l,"class","absolute top-1 right-1 text-xs font-normal"),m(t,"class","relative"),m(e,"slot","body"),m(e,"id","newReplieForm"),m(e,"method","POST"),m(e,"class","w-full"),m(e,"action","?/newReplie")},m(g,C){B(g,e,C),d(e,t),d(t,l),d(l,i),d(l,u),d(l,o),d(t,r),oe(f,t,null),b=!0,H||(T=Ie(y=Ae.call(null,e,s[34])),H=!0)},p(g,C){var F;(!b||C[0]&2)&&n!==(n=((F=g[1])==null?void 0:F.length)+"")&&me(i,n);const R={};!M&&C[0]&2&&(M=!0,R.value=g[1],ge(()=>M=!1)),f.$set(R),y&&Me(y.update)&&C[0]&136&&y.update.call(null,g[34])},i(g){b||(A(f.$$.fragment,g),b=!0)},o(g){U(f.$$.fragment,g),b=!1},d(g){g&&_(e),re(f),H=!1,T()}}}function Je(s){let e,t;return e=new et({}),{c(){se(e.$$.fragment)},l(l){ne(e.$$.fragment,l)},m(l,n){oe(e,l,n),t=!0},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){U(e.$$.fragment,l),t=!1},d(l){re(e,l)}}}function kt(s){let e,t,l,n="Reply",i,u,o=s[7]&&Je();return{c(){e=w("button"),o&&o.c(),t=Q(),l=w("span"),l.textContent=n,this.h()},l(r){e=k(r,"BUTTON",{type:!0,class:!0,form:!0});var f=O(e);o&&o.l(f),t=P(f),l=k(f,"SPAN",{class:!0,"data-svelte-h":!0}),le(l)!=="svelte-139oi22"&&(l.textContent=n),f.forEach(_),this.h()},h(){var r;m(l,"class","transition-all"),m(e,"type","submit"),m(e,"class","button-primary w-full transition-all overflow-hidden"),e.disabled=i=((r=s[1])==null?void 0:r.length)===0,m(e,"form","newReplieForm")},m(r,f){B(r,e,f),o&&o.m(e,null),d(e,t),d(e,l),u=!0},p(r,f){var M;r[7]?o?f[0]&128&&A(o,1):(o=Je(),o.c(),A(o,1),o.m(e,t)):o&&(ke(),U(o,1,1,()=>{o=null}),we()),(!u||f[0]&2&&i!==(i=((M=r[1])==null?void 0:M.length)===0))&&(e.disabled=i)},i(r){u||(A(o),u=!0)},o(r){U(o),u=!1},d(r){r&&_(e),o&&o.d()}}}function yt(s){var ae,c;let e,t,l,n,i,u,o,r,f,M,y,b,H,T,D,h,v,g,C,R,F,V,E,j;function K(a,p){return a[11]?ct:ft}let $=K(s)(s),G=De(s[0]),S=[];for(let a=0;a<G.length;a+=1)S[a]=Ye(Fe(s,G,a));const X=a=>U(S[a],1,1,()=>{S[a]=null});function ce(a){s[25](a)}let pe={title:"Delete replie",$$slots:{footer:[_t],body:[mt]},$$scope:{ctx:s}};s[9]!==void 0&&(pe.status=s[9]),y=new Ne({props:pe}),de.push(()=>be(y,"status",ce));function Z(a){s[28](a)}let he={title:"Delete question",closeButton:!1,$$slots:{footer:[gt],body:[dt]},$$scope:{ctx:s}};s[6]!==void 0&&(he.status=s[6]),T=new Ne({props:he}),de.push(()=>be(T,"status",Z));function ve(a){s[32](a)}let L={title:"New question",$$slots:{footer:[vt],body:[bt]},$$scope:{ctx:s}};s[8]!==void 0&&(L.status=s[8]),v=new Ne({props:L}),de.push(()=>be(v,"status",ve));function Te(a){s[36](a)}let Ce={title:`Reply to ${s[3]?(c=(ae=s[0].filter(s[35])[0])==null?void 0:ae.postedBy)==null?void 0:c.username:""}`,$$slots:{footer:[kt],body:[wt]},$$scope:{ctx:s}};return s[5]!==void 0&&(Ce.status=s[5]),R=new Ne({props:Ce}),de.push(()=>be(R,"status",Te)),{c(){e=Q(),t=w("div"),l=w("div"),n=w("h6"),i=W("Support e-mail : "),u=w("button"),o=W(s[12]),r=Q(),$.c(),f=Q();for(let a=0;a<S.length;a+=1)S[a].c();M=Q(),se(y.$$.fragment),H=Q(),se(T.$$.fragment),h=Q(),se(v.$$.fragment),C=Q(),se(R.$$.fragment),this.h()},l(a){lt("svelte-by7ird",Ue.head).forEach(_),e=P(a),t=k(a,"DIV",{class:!0});var ee=O(t);l=k(ee,"DIV",{class:!0});var te=O(l);n=k(te,"H6",{class:!0});var ue=O(n);i=Y(ue,"Support e-mail : "),u=k(ue,"BUTTON",{class:!0});var N=O(u);o=Y(N,s[12]),N.forEach(_),ue.forEach(_),r=P(te),$.l(te),f=P(te);for(let I=0;I<S.length;I+=1)S[I].l(te);te.forEach(_),ee.forEach(_),M=P(a),ne(y.$$.fragment,a),H=P(a),ne(T.$$.fragment,a),h=P(a),ne(v.$$.fragment,a),C=P(a),ne(R.$$.fragment,a),this.h()},h(){Ue.title="PCC - Get Help",m(u,"class","font-semibold"),m(n,"class","font-normal"),m(l,"class","w-full h-full flex flex-col gap-4"),m(t,"class","max-w-screen-lg mx-auto mt-4 grow w-full py-8 px-4 lg:px-6")},m(a,p){B(a,e,p),B(a,t,p),d(t,l),d(l,n),d(n,i),d(n,u),d(u,o),d(l,r),$.m(l,null),d(l,f);for(let ee=0;ee<S.length;ee+=1)S[ee]&&S[ee].m(l,null);B(a,M,p),oe(y,a,p),B(a,H,p),oe(T,a,p),B(a,h,p),oe(v,a,p),B(a,C,p),oe(R,a,p),V=!0,E||(j=[Ie(ut.call(null,u,s[12])),fe(u,"svelte-copy",s[15]),fe(u,"svelte-copy:error",s[16])],E=!0)},p(a,p){var I,x;if($.p(a,p),p[0]&2685){G=De(a[0]);let q;for(q=0;q<G.length;q+=1){const z=Fe(a,G,q);S[q]?(S[q].p(z,p),A(S[q],1)):(S[q]=Ye(z),S[q].c(),A(S[q],1),S[q].m(l,null))}for(ke(),q=G.length;q<S.length;q+=1)X(q);we()}const ee={};p[0]&524|p[1]&4096&&(ee.$$scope={dirty:p,ctx:a}),!b&&p[0]&512&&(b=!0,ee.status=a[9],ge(()=>b=!1)),y.$set(ee);const te={};p[0]&72|p[1]&4096&&(te.$$scope={dirty:p,ctx:a}),!D&&p[0]&64&&(D=!0,te.status=a[6],ge(()=>D=!1)),T.$set(te);const ue={};p[0]&1154|p[1]&4096&&(ue.$$scope={dirty:p,ctx:a}),!g&&p[0]&256&&(g=!0,ue.status=a[8],ge(()=>g=!1)),v.$set(ue);const N={};p[0]&9&&(N.title=`Reply to ${a[3]?(x=(I=a[0].filter(a[35])[0])==null?void 0:I.postedBy)==null?void 0:x.username:""}`),p[0]&138|p[1]&4096&&(N.$$scope={dirty:p,ctx:a}),!F&&p[0]&32&&(F=!0,N.status=a[5],ge(()=>F=!1)),R.$set(N)},i(a){if(!V){for(let p=0;p<G.length;p+=1)A(S[p]);A(y.$$.fragment,a),A(T.$$.fragment,a),A(v.$$.fragment,a),A(R.$$.fragment,a),V=!0}},o(a){S=S.filter(Boolean);for(let p=0;p<S.length;p+=1)U(S[p]);U(y.$$.fragment,a),U(T.$$.fragment,a),U(v.$$.fragment,a),U(R.$$.fragment,a),V=!1},d(a){a&&(_(e),_(t),_(M),_(H),_(h),_(C)),$.d(),Xe(S,a),re(y,a),re(T,a),re(v,a),re(R,a),E=!1,st(j)}}}const ye=1e3;function Tt(s,e,t){let{data:l}=e,{form:n}=e,{questions:i,user:u,supportEmail:o}=l;i=i.map(c=>({...c,hiddenReplies:!0}));let r=!1,f=!1,M=!1,y=!1,b=!1,H="",T="",D,h,v=[];nt(()=>{const c=document.querySelectorAll("[data-replie-container]");t(4,v=Array.from(c).map(a=>({height:a.scrollHeight,el:a,questionId:a.dataset.replieContainer})))});const g=()=>{ie("success","Copied to clipboard successfully!")},C=()=>{ie("error","An error occurred while copying to the clipboard")},R=()=>{t(8,y=!y)},F=c=>{t(3,h=c.id),t(6,f=!f)},V=c=>{t(3,h=c.id),t(5,r=!r)},E=(c,a,p)=>{t(0,a[p].hiddenReplies=!c.hiddenReplies,i)},j=(c,a)=>{t(3,h=c.id),t(2,D=a.id),t(9,b=!b)},K=(c,a)=>a.questionId===c.id,J=()=>{t(9,b=!1)},$=c=>(c.formData.set("questionId",h),c.formData.set("replieId",D),({update:a})=>{a({reset:!1})});function G(c){b=c,t(9,b),t(13,n),t(0,i),t(3,h),t(4,v),t(2,D)}const S=()=>{t(6,f=!1)},X=c=>(c.formData.set("questionId",h),({update:a})=>{a({reset:!1})});function ce(c){f=c,t(6,f),t(13,n),t(0,i),t(3,h),t(4,v),t(2,D)}function pe(c){H=c,t(10,H),t(13,n),t(0,i),t(3,h),t(4,v),t(2,D)}function Z(c){T=c,t(1,T),t(13,n),t(0,i),t(3,h),t(4,v),t(2,D)}const he=()=>(t(7,M=!0),({update:c})=>{t(7,M=!1),c({reset:!1})});function ve(c){y=c,t(8,y),t(13,n),t(0,i),t(3,h),t(4,v),t(2,D)}function L(c){T=c,t(1,T),t(13,n),t(0,i),t(3,h),t(4,v),t(2,D)}const Te=c=>(t(7,M=!0),c.formData.set("postId",h),({update:a})=>{t(7,M=!1),a({reset:!1})}),Ce=c=>c.id===h;function ae(c){r=c,t(5,r),t(13,n),t(0,i),t(3,h),t(4,v),t(2,D)}return s.$$set=c=>{"data"in c&&t(14,l=c.data),"form"in c&&t(13,n=c.form)},s.$$.update=()=>{s.$$.dirty[0]&2&&(T==null?void 0:T.length)>ye&&t(1,T=T.slice(0,ye)),s.$$.dirty[0]&8221&&n&&(n.name==="newReplie"?n.status==="success"?(ie("success",n.message),t(0,i=i.map(c=>c.id===h?{...c,replies:[...c.replies,n.data]}:c)),t(5,r=!1),t(1,T=""),v.find(c=>c.questionId===h).height=Array.from(v.find(c=>c.questionId===h).el.children).map(c=>c.clientHeight)+v.find(c=>c.questionId===h).el.children.length-1*8,t(4,v=[...v]),t(3,h=null)):ie("error",n.message):n.name==="newQuestion"?n.status==="success"?(ie("success",n.message),t(0,i=[...i,n.data]),t(8,y=!1),t(1,T=""),t(10,H="")):ie("error",n.message):n.name==="deleteQuestion"?n.status==="success"?(ie("success",n.message),t(0,i=i.filter(c=>c.id!==h)),t(3,h=null),t(6,f=!1)):ie("error",n.message):n.name==="deleteReplie"&&(n.status==="success"?(ie("success",n.message),t(0,i=i.map(c=>c.id===h?{...c,replies:c.replies.filter(a=>a.id!==D)}:c)),v.find(c=>c.questionId===h).height=v.find(c=>c.questionId===h).el.scrollHeight,t(9,b=!1),t(3,h=null)):ie("error",n.message)),t(13,n=null))},[i,T,D,h,v,r,f,M,y,b,H,u,o,n,l,g,C,R,F,V,E,j,K,J,$,G,S,X,ce,pe,Z,he,ve,L,Te,Ce,ae]}class qt extends ot{constructor(e){super(),rt(this,e,Tt,yt,tt,{data:14,form:13},null,[-1,-1])}}export{qt as component};
